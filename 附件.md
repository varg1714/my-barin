## 1. StyleSettings

## 2. Minimal

```css

{
  "minimal-style@@h5-size": "0.9em",
  "minimal-style@@h6-size": "0.9em",
  "minimal-style@@h6-l": true,
  "minimal-style@@h3-l": true,
  "minimal-style@@h5-l": true,
  "minimal-style@@h4-l": true,
  "minimal-style@@h2-l": true,
  "minimal-style@@bold-color@@dark": "#985050",
  "minimal-style@@bold-color@@light": "#DF5454",
  "minimal-style@@ax1@@light": "#4AA972",
  "minimal-style@@code-white-space": "pre-wrap"
}

```

## 3. 列表间隔样式

```css
.markdown-reading-view ul>li ol:nth-of-type(1),
.markdown-reading-view ol>li ul:nth-of-type(1),
.markdown-reading-view ol>li ol:nth-of-type(1),
.markdown-reading-view ul>li ul:nth-of-type(1) {
    margin-top: 10px;
}
.markdown-reading-view ol li:last-of-type,
.markdown-reading-view ul li:last-of-type {
    margin-bottom: 10px;
}

.markdown-reading-view ol li:has( br),
.markdown-reading-view ul li:has( br) {
    margin-bottom: 10px!important;
}

.markdown-reading-view ol>li br:first-of-type,
.markdown-reading-view ul>li br:first-of-type {
    content: "";
    display: block;
    margin-top: 10px!important;
}
```

## 4. 代码块样式

```css
.markdown-preview-view pre,
.markdown-preview-view code :not(pre) {
  overflow-x: auto;
  overflow-y: auto;
  white-space: pre;
  max-height: 500px!important;
}

.markdown-rendered div > pre > code {
  white-space: pre-wrap;
  word-break: break-word;
  overflow-wrap: anywhere;
}

.markdown-preview-view code[class*="lang"] {
  overflow-x: auto;
  white-space: pre;
}
```

## 5. Mermaid 样式

```css
svg[id^="m"][width][height][viewBox] {
    max-width: 95%;
    max-height: 95%;
}

div.mermaid {
    margin-left: 0 !important;
    text-align: center;
    resize:both;
    overflow:auto;
    margin-bottom: 2px;
    position:relative;
    max-height: 600px;
    max-width: 100%;
}

div.mermaid::after {
    content:'';
    display:block;
    width:10px;
    height:10px;
    background-color:yellowgreen;
    position:absolute;
    right:0;
    bottom:0;
}
```

## 6. 图片居中

```css
img {
    display: block;
    margin-left: auto;
    margin-right: auto;
}

 .markdown-source-view.mod-cm6 .cm-content > * {
    margin: auto;
}
```

## 7. 行内代码块颜色

```css
li > code,p > code,.cm-s-obsidian span.cm-inline-code {
    background-color: #fff5f5 !important;
    color: #ff502c !important;
}
```

## 8. 列表包裹线

```css
li{position: relative;}
li::after {
  content: "";
  position: absolute;
  border-left: var(--indentation-guide-width) solid var(--indentation-guide-color);
  bottom: var(--size-2-1);
  left: calc(-1 * var(--font-text-size));
  height: calc(100% - 1.9 * var(--font-text-size));
}
ul::before, ol::before {
  display: none !important;
}
```

## 9. linter

### 9.1. 全局配置

```json
{
  "ruleConfigs": {
    "add-blank-line-after-yaml": {
      "enabled": true
    },
    "dedupe-yaml-array-values": {
      "enabled": false,
      "dedupe-alias-key": true,
      "dedupe-tag-key": true,
      "dedupe-array-keys": true,
      "ignore-keys": ""
    },
    "escape-yaml-special-characters": {
      "enabled": false,
      "try-to-escape-single-line-arrays": false
    },
    "force-yaml-escape": {
      "enabled": false,
      "force-yaml-escape-keys": ""
    },
    "format-tags-in-yaml": {
      "enabled": false
    },
    "format-yaml-array": {
      "enabled": false,
      "alias-key": true,
      "tag-key": true,
      "default-array-style": "single-line",
      "default-array-keys": true,
      "force-single-line-array-style": "",
      "force-multi-line-array-style": ""
    },
    "insert-yaml-attributes": {
      "enabled": false,
      "text-to-insert": "aliases: \ntags: "
    },
    "move-tags-to-yaml": {
      "enabled": false,
      "how-to-handle-existing-tags": "Nothing",
      "tags-to-ignore": ""
    },
    "remove-yaml-keys": {
      "enabled": false,
      "yaml-keys-to-remove": ""
    },
    "sort-yaml-array-values": {
      "enabled": false,
      "sort-alias-key": true,
      "sort-tag-key": true,
      "sort-array-keys": true,
      "ignore-keys": "",
      "sort-order": "Ascending Alphabetical"
    },
    "yaml-key-sort": {
      "enabled": false,
      "yaml-key-priority-sort-order": "",
      "priority-keys-at-start-of-yaml": true,
      "yaml-sort-order-for-other-keys": "None"
    },
    "yaml-timestamp": {
      "enabled": false,
      "date-created": true,
      "date-created-key": "date created",
      "force-retention-of-create-value": false,
      "date-modified": true,
      "date-modified-key": "date modified",
      "format": "dddd, MMMM Do YYYY, h:mm:ss a",
      "convert-to-utc": false
    },
    "yaml-title": {
      "enabled": false,
      "title-key": "title",
      "mode": "first-h1-or-filename-if-h1-missing"
    },
    "yaml-title-alias": {
      "enabled": false,
      "preserve-existing-alias-section-style": true,
      "keep-alias-that-matches-the-filename": false,
      "use-yaml-key-to-keep-track-of-old-filename-or-heading": true,
      "alias-helper-key": "linter-yaml-title-alias"
    },
    "capitalize-headings": {
      "enabled": false,
      "style": "Title Case",
      "ignore-case-words": true,
      "ignore-words": "macOS, iOS, iPhone, iPad, JavaScript, TypeScript, AppleScript, I",
      "lowercase-words": "a, an, the, aboard, about, abt., above, abreast, absent, across, after, against, along, aloft, alongside, amid, amidst, mid, midst, among, amongst, anti, apropos, around, round, as, aslant, astride, at, atop, ontop, bar, barring, before, B4, behind, below, beneath, neath, beside, besides, between, 'tween, beyond, but, by, chez, circa, c., ca., come, concerning, contra, counting, cum, despite, spite, down, during, effective, ere, except, excepting, excluding, failing, following, for, from, in, including, inside, into, less, like, minus, modulo, mod, near, nearer, nearest, next, notwithstanding, of, o', off, offshore, on, onto, opposite, out, outside, over, o'er, pace, past, pending, per, plus, post, pre, pro, qua, re, regarding, respecting, sans, save, saving, short, since, sub, than, through, thru, throughout, thruout, till, times, to, t', touching, toward, towards, under, underneath, unlike, until, unto, up, upon, versus, vs., v., via, vice, vis-à-vis, wanting, with, w/, w., c̄, within, w/i, without, 'thout, w/o, abroad, adrift, aft, afterward, afterwards, ahead, apart, ashore, aside, away, back, backward, backwards, beforehand, downhill, downstage, downstairs, downstream, downward, downwards, downwind, east, eastward, eastwards, forth, forward, forwards, heavenward, heavenwards, hence, henceforth, here, hereby, herein, hereof, hereto, herewith, home, homeward, homewards, indoors, inward, inwards, leftward, leftwards, north, northeast, northward, northwards, northwest, now, onward, onwards, outdoors, outward, outwards, overboard, overhead, overland, overseas, rightward, rightwards, seaward, seawards, skywards, skyward, south, southeast, southwards, southward, southwest, then, thence, thenceforth, there, thereby, therein, thereof, thereto, therewith, together, underfoot, underground, uphill, upstage, upstairs, upstream, upward, upwards, upwind, west, westward, westwards, when, whence, where, whereby, wherein, whereto, wherewith, although, because, considering, given, granted, if, lest, once, provided, providing, seeing, so, supposing, though, unless, whenever, whereas, wherever, while, whilst, ago, according to, as regards, counter to, instead of, owing to, pertaining to, at the behest of, at the expense of, at the hands of, at risk of, at the risk of, at variance with, by dint of, by means of, by virtue of, by way of, for the sake of, for sake of, for lack of, for want of, from want of, in accordance with, in addition to, in case of, in charge of, in compliance with, in conformity with, in contact with, in exchange for, in favor of, in front of, in lieu of, in light of, in the light of, in line with, in place of, in point of, in quest of, in relation to, in regard to, with regard to, in respect to, with respect to, in return for, in search of, in step with, in touch with, in terms of, in the name of, in view of, on account of, on behalf of, on grounds of, on the grounds of, on the part of, on top of, with a view to, with the exception of, à la, a la, as soon as, as well as, close to, due to, far from, in case, other than, prior to, pursuant to, regardless of, subsequent to, as long as, as much as, as far as, by the time, in as much as, inasmuch, in order to, in order that, even, provide that, if only, whether, whose, whoever, why, how, or not, whatever, what, both, and, or, not only, but also, either, neither, nor, just, rather, no sooner, such, that, yet, is, it"
    },
    "file-name-heading": {
      "enabled": false
    },
    "header-increment": {
      "enabled": true,
      "start-at-h2": true
    },
    "headings-start-line": {
      "enabled": false
    },
    "remove-trailing-punctuation-in-heading": {
      "enabled": false,
      "punctuation-to-remove": ".,;:!。，；：！"
    },
    "footnote-after-punctuation": {
      "enabled": false
    },
    "move-footnotes-to-the-bottom": {
      "enabled": false
    },
    "re-index-footnotes": {
      "enabled": false
    },
    "auto-correct-common-misspellings": {
      "enabled": false,
      "ignore-words": ""
    },
    "blockquote-style": {
      "enabled": false,
      "style": "space"
    },
    "convert-bullet-list-markers": {
      "enabled": false
    },
    "default-language-for-code-fences": {
      "enabled": false,
      "default-language": ""
    },
    "emphasis-style": {
      "enabled": false,
      "style": "consistent"
    },
    "no-bare-urls": {
      "enabled": false,
      "no-bare-uris": false
    },
    "ordered-list-style": {
      "enabled": false,
      "number-style": "ascending",
      "list-end-style": "."
    },
    "proper-ellipsis": {
      "enabled": false
    },
    "quote-style": {
      "enabled": false,
      "single-quote-enabled": true,
      "single-quote-style": "''",
      "double-quote-enabled": true,
      "double-quote-style": "\"\""
    },
    "remove-consecutive-list-markers": {
      "enabled": false
    },
    "remove-empty-list-markers": {
      "enabled": false
    },
    "remove-hyphenated-line-breaks": {
      "enabled": false
    },
    "remove-multiple-spaces": {
      "enabled": false
    },
    "strong-style": {
      "enabled": false,
      "style": "consistent"
    },
    "two-spaces-between-lines-with-content": {
      "enabled": false,
      "line-break-indicator": "  "
    },
    "unordered-list-style": {
      "enabled": false,
      "list-style": "consistent"
    },
    "compact-yaml": {
      "enabled": false,
      "inner-new-lines": false
    },
    "consecutive-blank-lines": {
      "enabled": true
    },
    "convert-spaces-to-tabs": {
      "enabled": false,
      "tabsize": 4
    },
    "empty-line-around-blockquotes": {
      "enabled": false
    },
    "empty-line-around-code-fences": {
      "enabled": true
    },
    "empty-line-around-math-blocks": {
      "enabled": true
    },
    "empty-line-around-tables": {
      "enabled": true
    },
    "heading-blank-lines": {
      "enabled": true,
      "bottom": true,
      "empty-line-after-yaml": true
    },
    "line-break-at-document-end": {
      "enabled": false
    },
    "move-math-block-indicators-to-their-own-line": {
      "enabled": false
    },
    "paragraph-blank-lines": {
      "enabled": true
    },
    "remove-empty-lines-between-list-markers-and-checklists": {
      "enabled": true
    },
    "remove-link-spacing": {
      "enabled": false
    },
    "remove-space-around-characters": {
      "enabled": false,
      "include-fullwidth-forms": true,
      "include-cjk-symbols-and-punctuation": true,
      "include-dashes": true,
      "other-symbols": ""
    },
    "remove-space-before-or-after-characters": {
      "enabled": false,
      "characters-to-remove-space-before": ",!?;:).’”]",
      "characters-to-remove-space-after": "¿¡‘(["
    },
    "space-after-list-markers": {
      "enabled": false
    },
    "space-between-chinese-japanese-or-korean-and-english-or-numbers": {
      "enabled": false,
      "english-symbols-punctuation-before": "-+;:'\"°%$)]",
      "english-symbols-punctuation-after": "-+'\"([¥$"
    },
    "trailing-spaces": {
      "enabled": false,
      "twp-space-line-break": false
    },
    "add-blockquote-indentation-on-paste": {
      "enabled": true
    },
    "prevent-double-checklist-indicator-on-paste": {
      "enabled": true
    },
    "prevent-double-list-item-indicator-on-paste": {
      "enabled": true
    },
    "proper-ellipsis-on-paste": {
      "enabled": false
    },
    "remove-hyphens-on-paste": {
      "enabled": false
    },
    "remove-leading-or-trailing-whitespace-on-paste": {
      "enabled": false
    },
    "remove-leftover-footnotes-from-quote-on-paste": {
      "enabled": false
    },
    "remove-multiple-blank-lines-on-paste": {
      "enabled": true
    }
  },
  "lintOnSave": false,
  "recordLintOnSaveLogs": false,
  "displayChanged": true,
  "lintOnFileChange": false,
  "displayLintOnFileChangeNotice": false,
  "settingsConvertedToConfigKeyValues": true,
  "foldersToIgnore": [],
  "filesToIgnore": [],
  "linterLocale": "system-default",
  "logLevel": "ERROR",
  "lintCommands": [],
  "customRegexes": [
    {
      "label": "移除标题全加粗",
      "find": "^(#+) \\*\\*(.*)\\*\\*",
      "replace": "$1 $2",
      "flags": "gm"
    }
  ],
  "commonStyles": {
    "aliasArrayStyle": "single-line",
    "tagArrayStyle": "single-line",
    "minimumNumberOfDollarSignsToBeAMathBlock": 2,
    "escapeCharacter": "\"",
    "removeUnnecessaryEscapeCharsForMultiLineArrays": false
  }
}
```

### 9.2. 替换规则

```txt

标题中文顿号替换:
^(\#+) ([\d|\.]+)、(.*) $1 $2. $3

去除阅读的摘录信息:
“([.|\s\S]*)”[\s\S]*摘录来自[\s\S]*此材料可能受版权保护。 $1

```

## 10. 参考资料

### 10.1. Minimal-标签样式

![](https://r2.129870.xyz/img/20221018170648.png)

### 10.2. EPUB 自定义字体

样式导入：

```html
<link href="Styles/Style0001.css" rel="stylesheet" type="text/css" />
```

#### 10.2.1. 字体样式

```css
	font-family: -apple-system, BlinkMacSystemFont,
    "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell",
    "Fira Sans", "Droid Sans", "Helvetica Neue",
    sans-serif;
	font-weight: normal;
```

#### 10.2.2. 标题样式

```css
.BiaoTi2 {
    color: #003366;
	font-size:1.4em;
    margin-bottom: 2em;
    margin-top: 2.5em;
    text-align: center;
    font-weight: bold;
}
```

正文标题：

```html
<h2 class="BiaoTi2">第十六章 街头</h2>
```

## 11. Arc 配置

### 11.1. CSDN

```css
* {
  -webkit-font-smoothing:auto;
  font-family: -apple-system,BlinkMacSystemFont,"Segoe UI","Noto Sans",Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji";
  line-height: 1.5;
  word-wrap: break-word;
}
```

#### 11.1.1. ChatGpt

```css
* {
  -webkit-font-smoothing:auto;
  font-family: -apple-system,BlinkMacSystemFont,"Segoe UI","Noto Sans",Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji";
}
```

### 11.2. Google

```css
.MBeuO {
  font-size: medium !important;
}

.MjjYud {
  font-size: medium !important;
}

.EyBRub {
  display: none;
}

.g {
  width: 100% !important;
}

.NJjxre {
  width: auto !important;
}

#center_col [data-st-tgt] {
  display: none;
}

.oIk2Cb {
  display: none;
}

#center_col [aria-label='广告'] {
  display: none;
}
```

## 12. FRP 配置

### 12.1. frp 双向 TLS 证书生成与配置

**目标:**
* 为 frp 隧道建立一个安全的双向 TLS 认证（mTLS）。
* **服务端(`frps`)证书**: 使用 `acme.sh` 自动管理，实现零运维续期。
* **客户端(`frpc`)证书**: 使用自建的私有 CA 手动签发，保证连接授权，每年需手动续期一次。

### 12.2. 准备工作

1. **域名规划**:
    * 确保你有一个域名，例如 `x.com`。
    * 创建一个专用于 frp 服务的子域名，例如 `frps.x.com`。
    * 在你的 DNS 提供商处，将 `frps.x.com` 这条 A 记录解析到你公网服务器的 IP 地址。

2. **创建工作目录**:
    * 在你**本地电脑**（或任何安全的环境）上，创建一个干净的目录来存放所有证书相关的文件。
    * **这是所有 OpenSSL 命令的操作目录。**

    ```bash
    mkdir -p ~/frp-mTLS-certs/client
    cd ~/frp-mTLS-certs
    ```

### 12.3. 服务端(`frps`)证书配置 (全自动)

这部分在你的**公网服务器**上操作。

1. 登录你的公网服务器。
2. 使用 `acme.sh` 为你的 `frps.x.com` 申请一个专有证书。推荐使用 DNS API 模式，这样无需开放 80端口。

    ```bash
    # (根据你的DNS提供商设置API密钥)
    # 例如，使用Cloudflare:
    # export CF_Key="YOUR_CLOUDFLARE_GLOBAL_API_KEY"
    # export CF_Email="YOUR_CLOUDFLARE_EMAIL"

    acme.sh --issue --dns dns_cf -d frps.x.com
    ```

3. **完成。** `acme.sh` 会自动处理这个证书的续期。记下 `acme.sh` 生成的证书路径，通常在 `/root/.acme.sh/frps.x.com/`。你需要 `fullchain.cer` 和 `frps.x.com.key` 这两个文件。

### 12.4. 客户端(`frpc`)证书体系生成 (手动)

这部分在你**本地电脑**的 `~/frp-mTLS-certs` 目录下操作。

**步骤 1：创建你的私有“客户端认证中心”(Client CA)**

```bash
# 1. 生成Client CA的私钥 (这是签发所有客户端证书的根)
openssl genrsa -out client-ca.key 4096

# 2. 生成Client CA的根证书，有效期10年
openssl req -x509 -new -nodes -key client-ca.key -subj "/CN=My Personal FRP Client CA" -sha256 -days 3650 -out client-ca.crt
```

* **产出**:
    * `client-ca.key`: **绝密私钥**，务必妥善保管，用于未来签发或吊销客户端证书。
    * `client-ca.crt`: **CA 的公开证书**，需要上传到 `frps` 服务器，用于验证客户端。

**步骤 2：为你的第一个 `frpc` 客户端签发证书 (包含 SAN)**

```bash
# 1. 进入为客户端准备的子目录
cd client

# 2. 创建一个包含SAN信息的配置文件 client_ext.cnf
cat > client_ext.cnf << EOF
[SAN]
subjectAltName = DNS:my-unique-frpc-client-1
EOF

# 3. 生成客户端的私钥
openssl genrsa -out client.key 2048

# 4. 生成证书签名请求(CSR)
openssl req -new -key client.key -subj "/CN=my-unique-frpc-client-1" -out client.csr

# 5. 使用你的Client CA签署证书，并附加SAN信息，有效期1年
openssl x509 -req -in client.csr -CA ../client-ca.crt -CAkey ../client-ca.key -CAcreateserial \
-out client.crt -days 365 -sha256 \
-extfile client_ext.cnf -extensions SAN

# 6. (可选) 清理中间文件
rm client.csr
```

* **产出**:
    * `client.key`: 客户端的私钥，需要上传到 `frpc` 服务器。
    * `client.crt`: 客户端的公钥证书，需要上传到 `frpc` 服务器。

### 12.5. 部署证书并最终配置

**A. 配置公网 `frps` 服务器**

1. **上传文件**：将 `~/frp-mTLS-certs/client-ca.crt` 文件上传到你的公网服务器，例如放到 `/etc/frp/`。
2. **修改 `frps.toml`**:

    ```toml
    # frps.toml
    bindPort = 7000
    auth.token = "a_very_secret_and_long_token"
    
    vhostHTTPPort = 7500
    subdomainHost = "x.com"

    [webServer]
    addr = "0.0.0.0"
    port = 7501
    user = "your_admin_user"
    password = "your_strong_password"

    [transport]
    [transport.tls]
    # 强制客户端必须使用TLS
    force = true
    # frps服务端的证书，由acme.sh管理
    certFile = "/root/.acme.sh/frps.x.com/fullchain.cer"
    keyFile = "/root/.acme.sh/frps.x.com/frps.x.com.key"
    # 用于验证客户端证书的CA
    trustedCaFile = "/etc/frp/client-ca.crt"
    ```

**B. 配置本地 `frpc` 服务器**

1. **上传文件**：将 `~/frp-mTLS-certs/client/` 目录下的 `client.crt` 和 `client.key` 上传到你的本地服务器，例如也放到 `/etc/frp/`。
2. **修改 `frpc.toml`**:

    ```toml
    # frpc.toml
    serverAddr = "frps.x.com"
    serverPort = 7000
    auth.token = "a_very_secret_and_long_token"

    [transport.tls]
    enable = true
    # 客户端自己的证书和私钥
    certFile = "/etc/frp/client.crt"
    keyFile = "/etc/frp/client.key"
    # 指定要验证的服务端证书上的名称
    serverName = "frps.x.com"

    # --- 你的代理配置 ---
    [[proxies]]
    name = "oplist_web"
    type = "http"
    localIP = "127.0.0.1"
    localPort = 80
    subdomain = "oplist"

    [[proxies]]
    name = "emby_web"
    type = "http"
    localIP = "127.0.0.1"
    localPort = 8091
    subdomain = "emby"

    [[proxies]]
    name = "local_ssh"
    type = "tcp"
    localIP = "127.0.0.1"
    localPort = 22
    remotePort = 2222
    ```

### 12.6. 完成

1. 在公网服务器上重启 `frps` 服务。
2. 在本地服务器上重启 `frpc` 服务。
3. 检查双方日志，确认连接成功建立，没有 TLS 相关的错误。
4. 续期 `client.crt`。续期时，只需重复**第三部分-步骤 2**即可。
