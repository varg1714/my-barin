---
source: https://mp.weixin.qq.com/s?__biz=MzI2NDU4OTExOQ==&mid=2247688195&idx=1&sn=a2ba7737825e9a82d816323338a21b88&scene=21&poc_token=HOvkGWmjZb5_hGqjfxWzuKGNLp_nwTcj7z7CkXmS
create: 2025-11-16 22:51
read: true
knowledge: true
knowledge-date: 2025-11-16
tags:
  - 金融交易
  - 入门概念
summary: "[[支付系统基本概念]]"
---
![](https://mmbiz.qpic.cn/mmbiz_png/VY8SELNGe94cQiccAo2zibZETiaOnMVLNQAO0Zne2x8KlehRMR8AsOTW90m1pAicBEw5wBJFkQiax8ricKGbKibEKV8gQ/640?wx_fmt=other&wxfrom=5&wx_lazy=1&wx_co=1&tp=webp#imgIndex=0)

![](https://mmbiz.qpic.cn/mmbiz_gif/VY8SELNGe96srmm5CxquJGSP4BbZA8IDLUj8l7F3tzrm8VuILsgUPDciaDLtvQx78DbkrhAqOJicxze5ZUO5ZLNg/640?wx_fmt=gif&wxfrom=5&wx_lazy=1&tp=webp#imgIndex=1)

  

👉目录

1 数据库做签名能不能防篡改？

2 能不能改完余额，趁对账没发现赶紧跑？

3 不改余额了，改一下提现不校验余额可以吗？

4 能不能从其他人的账户中转 1 元到自己的账户？

5 资金风险防控体系

在[《论篡改微信余额的技术可刑性》](https://mp.weixin.qq.com/s?__biz=MzI2NDU4OTExOQ==&mid=2247688153&idx=1&sn=16ca44856a664ef6bb22ede574c3b756&scene=21#wechat_redirect)一文中，鹅厂资深资金架构师分享论证了技术上的可刑性，评论区的卧龙凤雏们也纷纷提出了自己天才般的设想，场面非常热闹。  
正所谓 “未知攻，焉知防”，腾讯云开发者公众号特意约稿原作者，针对大家关注的技术方案做了进一步拆解研讨，看完你的余额就有救了，下半辈子就有“铁” 饭碗了！

  

关注腾讯云开发者，一手技术干货提前解锁👇

  

上一篇文章[**论篡改微信余额的技术可刑性**](https://mp.weixin.qq.com/s?__biz=MzI2NDU4OTExOQ==&mid=2247688153&idx=1&sn=16ca44856a664ef6bb22ede574c3b756&scene=21#wechat_redirect)发出去后，收到了许多给小帅的建议

1.  有说应该买好机票，改完余额趁系统发现之前跑路的。
    
2.  有说不能改余额，应该从别人的账户里薅的。
    
3.  有说可以用 ps 改的，好好好，自己给自己带来情绪价值是吧？图我给你 p 好了，拿去发朋友圈！
    

![](https://mmbiz.qpic.cn/mmbiz_png/VY8SELNGe95zSI5eZyab1XhTfRvFO6cntV6lo1rZmicD8wfqxBqVqhEgWeBHfVicc4C51icEEm3Qky8Yszv1jrvnw/640?wx_fmt=png&from=appmsg#imgIndex=2)

**评论区都很刑，也很可拷，说话又好听，看你们跃跃欲试的样子，真的很有判头。**

于是我觉得就还是很有必要解答一下大家的疑问和建议。

  

  

# 01

  

  

数据库做签名能不能防篡改？

这是网友私信的建议，签名当然是有点用的，但又不完全有用。

![](https://mmbiz.qpic.cn/mmbiz_jpg/VY8SELNGe95zSI5eZyab1XhTfRvFO6cnR0TgKo3qn7WS7ac2rzQ5HWS1Sljz1qEtpc0gADibQNZwZlrP1ah9dYg/640?wx_fmt=jpeg&from=appmsg#imgIndex=3)

例如可以给（账户 ID + 账户所有者 + 账户余额）加一个联合签名，只要数据被篡改，下一次读取验签的时候就能发现。**但这一招只能防君子不能防小人**，既然都决定要篡改数据了，重新计算一下签名，把签名一起改掉也不难吧？君子不会去改数据，小人弄到一个签名算法也不是难事，因此这一招意义不大。

  

  

# 02

  

  

能不能改完余额，趁对账没发现赶紧跑？

有朋友敏锐地观察到，**对账手段都是事后的**，也就是说在篡改余额和被发现之间有一个时间差，利用时间差跑路是不是就安全了？

太天真了兄 dei，改完余额要想获利是不是得提现？那么在提现的时候就会遇上风控拦截。

![](https://mmbiz.qpic.cn/mmbiz_jpg/VY8SELNGe95zSI5eZyab1XhTfRvFO6cnnwpd7DW8nvyIBNFFbjia124LNBAbnIePiapBfkdCXCcC9ysibU3UaDQSw/640?wx_fmt=jpeg&from=appmsg#imgIndex=4)

风控是基于大数据对用户画像进行分析，特别是对巨额提现行为，如果不符合该用户日常的操作，会对这一请求进行拒绝。

那既然提现走不通，直接把钱花掉可以吗？比如**花 4500 万买一根香蕉？**同样行不通，支付的时候一样有风控，类似请求可能会被**反洗钱策略**拒绝。

  

  

# 03

  

  

不改余额了，改一下提现不校验余额可以吗？

不通过改数据，而是找到提现链路中的关键环节，绕过余额校验，能提现成功吗？

首先，改代码的难度要比改数据还要高，**改代码需要经过代码审核（Code Review），还需经过自动化测试，还未把代码发布到线上就已经被发现了。**

其次，前面说了提现需要过风控的，在这里同样会拦截。

最后，即便悄摸摸地把代码发布了，把余额检查和风控都绕过去，在系统上依然有防控措施。

![](https://mmbiz.qpic.cn/mmbiz_jpg/VY8SELNGe95zSI5eZyab1XhTfRvFO6cnWwfDLzwAXs0u30A9AOEfysL7nxPqqHEMswcF7g2NoaKoL8tGh0DZnw/640?wx_fmt=jpeg&from=appmsg#imgIndex=5)

这里除了有风控拦截，还有渠道打款的余额二次校验和其他校验，所以**绕过余额检查是不可能提现成功的。**

  

  

# 04

  

  

能不能从其他人的账户中转 1 元到自己的账户？

有人在评论区提到从沉睡账户中薅钱，100w 个沉睡账户，每个 1 元也是一笔不小的收入是吧？

这当然不行！要完成转账也需要核身，就是**证明你是你才可以完成转账，**前台的功能走不通，只能后台改数据了。

但你觉得改数据也容易吗？

1.  怎么筛选 100w 个沉睡账户？你得先有查询权限并且知道怎么筛选出来。
    
2.  修改 100w 个账户的余额和流水，要改 200 万条数据。
    
3.  为了绕过账证核对，还要新增 100w 条转账记录。转账记录和账户余额可不在同一个数据库里面。
    

![](https://mmbiz.qpic.cn/mmbiz_jpg/VY8SELNGe95zSI5eZyab1XhTfRvFO6cniaFQZM5nrDniarVq5NffFOIQHptwDcuaF9wkgc3oKCdl2r1WeyC07Huw/640?wx_fmt=jpeg&from=appmsg#imgIndex=6)

好不容易把几百万条 SQL 准备好了，准备开始执行，由于数据量过大需要分批执行，假设每秒钟修改 1000 条记录，**修改 300w 条就需要大约 50 分钟。**在执行期间：

*   账证明细核对可以做到分钟级，我保证**技术小哥 10 分钟之内就会找到你；**
    
*   在转账系统的后台监控发现，数据库的变更数远高于接口请求数，你自以为神不知鬼不觉，但在监控曲线前无处遁形；
    
*   因为改动数据量太大，100w 个用户中有 1 个人发现账户少了 1 元，发起了投诉，客服和技术人员通过排查发现数据被篡改。
    

  

  

# 05

  

  

资金风险防控体系

经过两轮的讨论，大家应该会发现**资金风险防控从来不是点状的，而是形成一个网状结构，**仅仅从单点突破，几乎都很难从这个网撕开一个口子。这也是我们资金人的职责所在：保护用户放在我们这的每一笔资金。

如果对支付系统建设、对资金安全建设感兴趣，可以关注该公众号了解更多。

-End-

原创作者｜Louis

 ![](https://mmbiz.qpic.cn/mmbiz_png/VY8SELNGe975eiakGydXqTICibuXvLhyqN5sicc7ia7Cvb8nJGK2gjavrfIIYr5oicm20W8hFPvUdSm8UTzzWiaFco9Q/640?wx_fmt=other&from=appmsg&wxfrom=5&wx_lazy=1&wx_co=1&tp=webp#imgIndex=7)

  

  

在资金风险防控体系下，还有哪些办法能够增加微信余额？欢迎评论留言。我们将选取 1 则优质的评论，送出腾讯云定制文件袋套装 1 个（见下图）。1 月 21 日中午 12 点开奖。

  

![](https://mmbiz.qpic.cn/mmbiz_png/VY8SELNGe96Ad6VYX3tia1sGJkFMibI6902he72w3I4NqAf7H4Qx1zKv1zA4hGdpxicibSono28YAsjFbSalxRADBg/640?wx_fmt=other&from=appmsg&wxfrom=5&wx_lazy=1&wx_co=1&tp=webp#imgIndex=8)

📢📢欢迎加入腾讯云开发者社群，享前沿资讯、大咖干货，找兴趣搭子，交同城好友，更有鹅厂招聘机会、限量周边好礼等你来~

![](https://mmbiz.qpic.cn/mmbiz_jpg/VY8SELNGe95yTGCsG3Yo5emBRh7nbAJybNbAp7TTMaGDiack9ngLFmyM3aCGAQmzqicDgaWicbRB5FPJVcRE7UWIg/640?wx_fmt=other&from=appmsg&wxfrom=5&wx_lazy=1&wx_co=1&tp=webp#imgIndex=9)

（长按图片立即扫码）

![](https://mmbiz.qpic.cn/mmbiz_png/VY8SELNGe979Bb4KNoEWxibDp8V9LPhyjmg15G7AJUBPjic4zgPw1IDPaOHDQqDNbBsWOSBqtgpeC2dvoO9EdZBQ/640?wx_fmt=other&wxfrom=5&wx_lazy=1&wx_co=1&tp=webp#imgIndex=10)

[

![](https://mmbiz.qpic.cn/mmbiz_png/VY8SELNGe96tibEQffzhicPmiaLtvB5ZReH3obS4vTAfMgE5t7zfape3qa6ibSSrgeatZWpHjvElDHMySKbh8eQsbg/640?wx_fmt=other&from=appmsg&wxfrom=5&wx_lazy=1&wx_co=1&tp=webp#imgIndex=11)

](https://mp.weixin.qq.com/s?__biz=MzI2NDU4OTExOQ==&mid=2247687679&idx=1&sn=77cfa1d0970ce833d5c5566a3801c9eb&scene=21#wechat_redirect)

[![](https://mmbiz.qpic.cn/mmbiz_png/VY8SELNGe96tibEQffzhicPmiaLtvB5ZReH82py5ibgriaFe1xQmY5HeKlvwSOdeTpDdzC4EFrfcMMqW5bJichDvcSlw/640?wx_fmt=other&from=appmsg&wxfrom=5&wx_lazy=1&wx_co=1&tp=webp#imgIndex=12)](https://mp.weixin.qq.com/s?__biz=MzI2NDU4OTExOQ==&mid=2247686475&idx=1&sn=01916b2e69d07e0302c5d920649aa430&scene=21#wechat_redirect)

[![](https://mmbiz.qpic.cn/mmbiz_png/VY8SELNGe96tibEQffzhicPmiaLtvB5ZReHqJ2AtztooJqIvF2GnFea9umib94Z0KCr3qoHqvCAAhSauDtWaialdLpA/640?wx_fmt=other&from=appmsg&wxfrom=5&wx_lazy=1&wx_co=1&tp=webp#imgIndex=13)](https://mp.weixin.qq.com/s?__biz=MzI2NDU4OTExOQ==&mid=2247687051&idx=1&sn=b00b08ad3e46a14691c69db5c8c9bfcd&scene=21#wechat_redirect)

![](https://mmbiz.qpic.cn/mmbiz_png/VY8SELNGe95pIHzoPYoZUNPtqXgYG2leyAEPyBgtFj1bicKH2q8vBHl26kibm7XraVgicePtlYEiat23Y5uV7lcAIA/640?wx_fmt=other&from=appmsg&wxfrom=5&wx_lazy=1&wx_co=1&tp=webp#imgIndex=14)