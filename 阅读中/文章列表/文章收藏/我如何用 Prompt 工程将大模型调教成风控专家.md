---
source: https://mp.weixin.qq.com/s/IpgildollNXLFOlpR_crEQ
create: 2025-09-11 21:17
read: false
knowledge: false
---
作为一个交易风控的算法工程师，在日常工作中，我常常与海量的数据和复杂的模型打交道，试图在看似平静的水面下，捕捉那些隐藏的风险暗流。最近，我尝试将大语言模型（LLM）引入到我的工作流中，这段经历充满了波折、顿悟和惊喜。 今天，我想复盘整个过程，分享我如何通过一套循序渐进的 “Prompt 工程心法”，将一个“什么都懂一点，但什么都不精” 的通用大模型，一步步调教成能够精准识别复杂电商风控风险的“AI 专家”。

### 一、 引言：当算法工程师遇见 “猜不透” 的 AI

故事的起点，是我近期做的一个项目。我通过用户的行为序列 Embedding 进行聚类，希望能发现一些未知的、有组织的风险模式。算法跑完，我得到了上百个 “疑似风险簇”，每个簇里都包含了行为高度相似的用户订单。 问题来了：如何高效、准确地甄别这些聚类结果？ 传统的人工审核，不仅耗时耗力，而且每个人的判断标准难以统一，效率和准确性都无法保证。于是，我自然而然地想到了正当红的大模型。 我最初的想象非常美好：把一个簇的数据丢给 AI，它就能告诉我这群用户有没有问题。但现实很快给了我一记重拳。 我最初的尝试，Prompt 大概是这样的：“帮我看看这个用户簇有没有风险”。 得到的结果五花八门：模型要么像个“老好人”，对明显的异常视而不见；要么像个“怀疑狂”，把正常的用户促销活动也标记为高风险。它就像一个刚入职的实习生，知识渊博，但完全不懂业务，无法胜任真正的工作。 我很快意识到：问题不在于模型本身，而在于我与模型沟通的方式。 我不能把它当成一个全知的黑盒，而要把它当成一个需要悉心“带教” 的、潜力巨大的“实习生”。我的任务，就是设计一份完美的“岗前培训手册”——也就是我们的主角：Prompt。

### 二、 第一阶段：从 0 到 1，给 AI 一本 “操作手册”

要让一个实习生能干活，首先得让他知道 “干什么” 和“怎么干”。我需要将我作为风控专家的 “隐性知识” 显性化，为 AI 提供一个结构化的分析框架。 我的关键动作有三步：

1. 角色扮演 (Role-Playing)：这是最简单也最有效的一步。我在 Prompt 的开头加入了一句魔法咒语：

 “你是一名资深的电商风控专家...”

 这能有效地为 AI 设定身份，激活它庞大知识库中与该角色最相关的能力和知识。

2. 定义分析维度 (Defining Dimensions)：我把我人工审核时会关注的点，明确地列为指令，引导 AI 从这几个方面入手：

◦收货人信息分析

◦收货地址分析

◦商品组合与价值分析

3. 结构化输入输出 (Structured I/O)：为了实现高效、准确的人机协作，我规范了数据的 “进” 和“出”。

◦输入：考虑到 Token 的消耗效率和成本，我选择了 CSV 格式来组织和输入一个簇内的多个订单数据。相比 JSON 或 Markdown 表格，CSV 格式最紧凑，能在有限的上下文中传入最多的信息。

◦输出：我要求 AI 必须以严格的 JSON 格式返回分析结果。这便于我的后端程序直接解析，实现真正的自动化。 经过这番改造，我的 V1 版 Prompt 诞生了。它就像一本清晰的操作手册，让 AI 的输出从杂乱无章的自然语言，变成了结构化的分析报告。

阶段小结：我们迈出了从 0 到 1 的关键一步，实现了流程自动化。但此时的 AI，更像一个只会照本宣科的 “初级分析员”，它有了流程，但没有灵魂，更缺乏对业务复杂性的理解，误报率依然很高。

### 三、 第二阶段：注入业务常识，让 AI 学会 “具体问题具体分析”

很快，我发现这个 “初级分析员” 开始频繁地“犯教条主义错误”。它会把一些业务中的正常现象，当作风险信号上报。我意识到，我不仅要给它规则，更要给它“规则背后的逻辑”。

我开始为 Prompt 注入一系列的 “豁免规则” 和“背景知识”：

• 挑战 1：高折扣 ≠ 风险

◦AI 的误判：AI 看到用户实付金额极低，就判定为 “薅羊毛”。

◦我的 “补丁”：在 Prompt 中明确指出：“本次分析的很多订单是【新用户首单】，平台会提供高额补贴，因此高折扣是正常现象，不能仅凭此点判断风险。”

• 挑战 2：随机串 ≠ 假姓名

◦AI 的误判：AI 看到 w1e8192vf4rwz 这样的用户 ID，就认为是 “乱码、虚假信息”。

◦我的 “补丁”：明确定义 “用户 ID 是系统自动生成的随机字符串，其格式本身不代表风险。你需要分析的是用户自己填写的【收货人姓名】是否存在异常模式。”

• 挑战 3：0 元 ≠ 异常；昵称 ≠ 虚假；权益商品 ≠ 风险

◦我举一反三，陆续加入了更多 “豁免规则”：

▪“价格为 0 的商品通常是【赠品】，本身无风险。”

▪“用户出于隐私保护，使用昵称或非全名（如‘李先生’）是普遍现象，单笔订单不应视为风险。”

▪“‘省钱卡’等权益商品是平台推广的正常模式，与主商品一并购买不意味着风险。”

阶段小结：经过这一轮 “业务培训”，AI 的“情商” 和“业务感”显著提升，误报率大幅下降。它不再是一个只会执行命令的机器，而是成长为了解我们业务的“中级分析师”。

### 四、 第三阶段：提升分析深度，教会 AI“像侦探一样思考”

解决了误报问题后，我开始追求更高的目标：提升模型的 “洞察力”，让它能发现更深层次、更隐蔽的风险。我发现，AI 能处理“单点” 的异常，但看不透 “协同” 作案。

• 瓶颈 1：忽略低价值商品风险

◦AI 的认知停留在 “高价值 = 高风险”，只对手机、显卡等商品敏感。

◦我的 “升级”：拓宽风险定义，明确指出 “【远超个人合理消费范畴】的低价值、高流通性快消品（如成百箱的饮料），是小微商户囤货套利的重要信号。”

• 瓶颈 2：缺乏 “一致性” 视角

◦当多个不同账号的地址并不完全相同时，AI 很难将它们关联起来。

◦我的 “升级”：引入“购物车一致性” 概念，告诉 AI：“多个不同用户，如果购买的商品列表【完全相同或高度雷同】，这种‘抄作业’式的行为是脚本化或有组织行为的强力证据。” 

阶段小结：通过教会 AI 识别 “行为指纹”，它的分析视角成功地从“订单级” 提升到了“团伙级”。它学会了“串联证据”，具备了识别有组织、规模化风险的能力，成长为一名“高级分析师”。

### 五、 第四阶段：终极进化，让 AI 在模糊中做出 “法官式裁决”

这是整个旅程中最具挑战、也最有价值的一步。我面临一个终极难题：如何区分 “真团伙” 与“假聚集”？

我的聚类算法本身，可能就会把一些无辜的用户圈在一起。例如，平台在某个城市搞了一场营销活动，给所有新用户发了同一张券，导致大量真实用户在相近的时间购买了同款促销品。他们的行为高度相似，但他们彼此之间毫无关联。

如果 AI 无法分辨这种情况，那么之前的努力都将付诸东流。我需要将它从一个 “分析师” 或“侦探”，升级为一位“法官”，能够在模糊的信息中做出审慎的裁决。

我的解决方案是：引入 “双假设裁决框架”。

我在 Prompt 中，要求 AI 在两个核心假设之间进行权衡和判断：

• 假设 A：协同风险团伙

• 假设 B：良性特征客群

并且，我为它定义了做出裁决的关键依据——“硬链接” 证据。

“硬链接是指能将不同账号背后指向同一个实体的决定性证据，例如【完全相同的非公共收货地址】。你的首要任务是寻找硬链接。如果找到，则基本可判定为风险团伙。如果找不到，再评估其行为是否能被营销活动等良性原因完美解释。”

同时，我为它提供了正反两方面的完整 Few-Shot 示例，一个是有硬链接的风险团伙，另一个是由营销活动导致的良性客群，为它的 “裁决” 树立了清晰的标杆。 

阶段小结：至此，我们的 Prompt 不再是一系列零散的指令，而是一个完整的、包含世界观和方法论的【专家系统】。AI 最终进化成了一位能够在复杂模糊的信息中，基于证据、权衡不同可能性，并做出审慎判断的 “风控专家”。

### 六、 总结与思考：我的 Prompt 工程心法

### 

![](https://mmbiz.qpic.cn/sz_mmbiz_png/9K73WSRq6BWlYXBY4lm0xgn00Dk8qzQVYcadkHTiblicKkw5AgHicgokAibEeSOicvz6vYu7QzpC71tibic33B5UW4eyQ/640?wx_fmt=png&from=appmsg&tp=wxpic&wxfrom=5&wx_lazy=1#imgIndex=0)

回顾这段从 V1 到 V4 的进化之路，我将我的经验提炼为几点 “心法”，希望能对大家有所启发：

• 始于模仿，终于框架：从模仿你自己的专家思考过程开始，逐步将零散的规则，抽象和沉淀为普适的、可复用的分析框架。

• 规则是骨架，背景是血肉：只给规则，AI 是冰冷的机器；为规则注入业务背景、用户心理等 “常识”，AI 才有智能的灵魂。

• 反例是最好的老师：教会 AI“什么不是风险”和 “什么是风险” 同等重要。精心设计的 “豁免规则” 和“良性示例”，是降低误报率、提升模型可用性的关键。

• 从 “指令” 到“思维模型”：最高级的 Prompt，不是告诉 AI 一步步做什么，而是教会它一套思考问题的方法论（比如我们的“双假设裁决框架”），让它自己去分析和判断。

这次探索让我深刻地体会到，在 AI 时代，Prompt 工程绝不仅仅是 “提问的艺术”，它更是一门连接领域专家与通用人工智能的、充满创造性的交叉学科。我们每个工程师，都可以通过它，将自己的专业知识和智慧，赋能给这个强大的新伙伴，去解决更多过去难以解决的问题。

希望我的这段经历，能为你打开一扇新的大门。感谢阅读！

![](https://mmbiz.qpic.cn/sz_mmbiz_png/9K73WSRq6BX7pUWE2unIK4GPKXkCGYJH6icScEE4BrdcWh1aFuOVaEVgounD8gqmMNItalxRGR3U0x9rCJwNhdw/640?wx_fmt=png&from=appmsg&wxfrom=5&wx_lazy=1&tp=wxpic#imgIndex=17)

扫一扫，加入技术交流群