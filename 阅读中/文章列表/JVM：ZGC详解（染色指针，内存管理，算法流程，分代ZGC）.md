---
source: https://blog.csdn.net/qq_42192693/article/details/145106593
create: 2025-07-14
read: true
knowledge: true
---
### 1ï¼ŒZGCï¼ˆJDK21ä¹‹å‰ï¼‰

> **ZGC çš„æ ¸å¿ƒæ˜¯ä¸€ä¸ªå¹¶å‘åƒåœ¾æ”¶é›†å™¨ï¼Œ** **æ‰€æœ‰ç¹é‡çš„å·¥ä½œéƒ½åœ¨Java çº¿ç¨‹ç»§ç»­æ‰§è¡Œçš„åŒæ—¶å®Œæˆã€‚** **è¿™æå¤§åœ°é™ä½äº†åƒåœ¾æ”¶é›†å¯¹åº”ç”¨ç¨‹åºå“åº”æ—¶é—´çš„å½±å“ã€‚**
> 
> - **ZGCä¸ºäº†æ”¯æŒå¤ªå­—èŠ‚ï¼ˆTBï¼‰çº§å†…å­˜ï¼Œ** **è®¾è®¡äº†åŸºäºé¡µé¢ï¼ˆpageï¼‰çš„åˆ†é¡µç®¡ç†** **ï¼ˆç±»ä¼¼äºG1çš„åˆ†åŒºRegionï¼‰ï¼›**
> - **ZGCä¸ºäº†èƒ½å¤Ÿå¿«é€Ÿå¯¹å¯¹è±¡è¿›è¡Œå¹¶å‘æ ‡è®°å’Œå¹¶å‘ç§»åŠ¨ï¼Œå¯¹å†…å­˜ç©ºé—´é‡æ–°è¿›è¡Œäº†åˆ’åˆ†ï¼Œè¿™å°±æ˜¯ZGCä¸­æ–°å¼•å…¥çš„** **æŒ‡é’ˆæŸ“è‰²ï¼›**
> - **ä»…æ”¯æŒ Linux 64 ä½ç³»ç»Ÿï¼Œä¸æ”¯æŒ 32 ä½å¹³å°ã€‚å› æ­¤ä¹Ÿä¸æ”¯æŒå‹ç¼©æŒ‡é’ˆã€‚**
> - **åŒæ—¶ZGCä¸ºäº†èƒ½æ›´åŠ é«˜æ•ˆåœ°ç®¡ç†å†…å­˜ï¼Œ** **è®¾è®¡äº†ç‰©ç†å†…å­˜å’Œè™šæ‹Ÿå†…å­˜ä¸¤çº§å†…å­˜ç®¡ç†ã€‚**
> - **æ”¯æŒNUMA-Awareå†…å­˜åˆ†é…ï¼š** **åœ¨NUMAï¼ˆéç»Ÿä¸€å†…å­˜è®¿é—®æ¶æ„ï¼‰æ¶æ„ä¸‹ï¼Œæ¯ä¸ªå¤„ç†å™¨æ ¸å¿ƒæœ‰ç‹¬ç«‹ç®¡ç†çš„æœ¬åœ°å†…å­˜ï¼Œè®¿é—®å…¶ä»–æ ¸å¿ƒçš„å†…å­˜è¾ƒæ…¢ã€‚ZGCé€šè¿‡ä¼˜å…ˆåœ¨è¯·æ±‚çº¿ç¨‹æ‰€åœ¨å¤„ç†å™¨çš„æœ¬åœ°å†…å­˜ä¸Šåˆ†é…å¯¹è±¡ï¼Œä¼˜åŒ–äº†å†…å­˜è®¿é—®æ•ˆç‡ã€‚**

#### 1.1ï¼Œä¼ ç»Ÿå¯¹è±¡åœ°å€

> **ã€ä¼ ç»ŸGCæŒ‡ä»¤åœ°å€è®¾è®¡ã€‘** **åœ¨ZGCå‡ºç°ä¹‹å‰ï¼ŒGCä¿¡æ¯è¢«ä¿å­˜åœ¨å¯¹è±¡å¤´çš„Mark Wordå½“ä¸­ã€‚** ****64ä½JVM** ä¸»è¦æŒ‡çš„æ˜¯JVMå¯ä»¥ä½¿ç”¨64ä½çš„åœ°å€ç©ºé—´ï¼ˆå³64ä½æŒ‡é’ˆï¼‰ï¼Œè€Œä¸æ˜¯æ¯ä¸ªå¯¹è±¡çš„å¤§å°å¿…é¡»æ˜¯64å­—èŠ‚ã€‚**
> 
> - **å¯¹è±¡å¤´ï¼š**
> 	- **Mark Word** ï¼š
> 		- å­˜å‚¨å¯¹è±¡çš„ **å“ˆå¸Œç ** ï¼ˆå¦‚æœæ˜¯ç¬¬ä¸€æ¬¡è®¡ç®—å“ˆå¸Œæ—¶ä¼šè®¡ç®—å¹¶ç¼“å­˜ï¼‰ã€‚
> 		- **GCçŠ¶æ€ï¼š** ç”¨äºGCæ—¶æ ‡è®°å¯¹è±¡çš„çŠ¶æ€ï¼ˆå¦‚æ˜¯å¦å¯è¾¾ï¼‰ã€‚
> 		- **é”ä¿¡æ¯ï¼š** åœ¨å¯¹è±¡è¢«é”å®šæ—¶å­˜å‚¨é”çš„çŠ¶æ€ï¼Œå¦‚è½»é‡çº§é”ã€é‡é‡çº§é”ã€åå‘é”ç­‰ã€‚
> 	- **Klass Pointerï¼ˆç±»æŒ‡é’ˆï¼‰ï¼š** æŒ‡å‘è¯¥å¯¹è±¡çš„ç±»å…ƒæ•°æ®ï¼Œå®é™…ä¸Šæ˜¯æŒ‡å‘å¯¹è±¡çš„ç±»ä¿¡æ¯ï¼ˆ `Class` å¯¹è±¡ï¼‰ã€‚è¯¥æŒ‡é’ˆæŒ‡å‘Classå¯¹è±¡çš„å†…å­˜åœ°å€ï¼Œé€šè¿‡è¿™ä¸ªæŒ‡é’ˆï¼ŒJVMèƒ½å¤ŸæŸ¥æ‰¾åˆ°è¯¥å¯¹è±¡çš„ç±»å‹ä¿¡æ¯ï¼ŒClasså¯¹è±¡åŒ…å«äº†è¯¥ç±»çš„ç»“æ„ä¿¡æ¯ï¼Œæ¯”å¦‚ç±»çš„å­—æ®µã€æ–¹æ³•ä»¥åŠæ¥å£ç­‰ã€‚
> - **å®ä¾‹æ•°æ®ï¼š** å®ä¾‹æ•°æ®éƒ¨åˆ†å­˜å‚¨å¯¹è±¡çš„å®é™…æ•°æ®ã€‚å³ç±»ä¸­å®šä¹‰çš„å®ä¾‹å˜é‡ï¼ˆå±æ€§ï¼‰ã€‚è¿™äº›æ•°æ®æŒ‰ç…§ç±»çš„å­—æ®µé¡ºåºåœ¨å†…å­˜ä¸­æ’åˆ—ã€‚ **ä¾‹å¦‚ï¼Œå¦‚æœä¸€ä¸ªç±»ä¸­æœ‰ä¸€ä¸ªintç±»å‹å’Œä¸€ä¸ªStringç±»å‹çš„å­—æ®µï¼Œå®ä¾‹æ•°æ®éƒ¨åˆ†å°±ä¾æ¬¡å­˜å‚¨è¿™ä¸¤ä¸ªå­—æ®µçš„å€¼ã€‚**
> - **å¯¹é½å¡«å……ï¼š** ä¸ºäº†ç¡®ä¿å¯¹è±¡åœ¨å†…å­˜ä¸­çš„å¯¹é½ï¼ŒJVMé€šå¸¸ä¼šå¯¹å¯¹è±¡çš„å†…å­˜å¸ƒå±€è¿›è¡Œå¡«å……ã€‚ **ä¾‹å¦‚ï¼Œ32ä½æœºå™¨ä¸Šï¼Œé€šå¸¸è¦æ±‚å¯¹è±¡çš„å¤§å°æ˜¯8çš„å€æ•°ã€‚å¦‚æœå¯¹è±¡çš„å®é™…æ•°æ®å ç”¨å†…å­˜ä¸æ»¡è¶³å¯¹é½è¦æ±‚ï¼ŒJVMä¼šæ’å…¥é¢å¤–çš„å¡«å……å­—èŠ‚ã€‚**
> ```csharp
> public class Person {
> 
>     int age;
> 
>     String name;
> 
> }
> ```
> 
> **å†…å­˜å¸ƒå±€ç¤ºæ„å›¾ï¼ˆå‡è®¾64ä½ç³»ç»Ÿï¼ŒæŒ‰é»˜è®¤çš„å†…å­˜å¸ƒå±€ï¼‰ï¼šæ€»å…±å ç”¨çš„å†…å­˜å¯èƒ½æ˜¯ 8 + 8 + 4 + 8 = 28å­—èŠ‚ï¼Œä½†ä¸ºäº†æ»¡è¶³å¯¹é½è¦æ±‚ï¼Œå¯èƒ½ä¼šæœ‰é¢å¤–çš„å¡«å……å­—èŠ‚ï¼Œ** **æœ€ç»ˆå¯¹è±¡çš„å¤§å°** **é€šå¸¸ä¼šæ˜¯32å­—èŠ‚ï¼ˆå‡è®¾JVMé»˜è®¤æŒ‰ç…§8å­—èŠ‚å¯¹é½ï¼‰ã€‚**

#### 1.2ï¼ŒZGCå¯¹è±¡åœ°å€

> **ã€ZGCè™šæ‹Ÿåœ°å€ç©ºé—´ã€‘** **HotSpotè™šæ‹Ÿæœºçš„å‡ ç§æ”¶é›†å™¨æœ‰ä¸åŒçš„æ ‡è®°å®ç°æ–¹æ¡ˆï¼Œæœ‰çš„æŠŠæ ‡è®°ç›´æ¥è®°å½•åœ¨å¯¹è±¡å¤´ä¸Šï¼ˆå¦‚Serialæ”¶é›†å™¨ï¼‰ï¼Œæœ‰çš„æŠŠæ ‡è®°è®°å½•åœ¨ä¸å¯¹è±¡ç›¸äº’ç‹¬ç«‹çš„æ•°æ®ç»“æ„ä¸Šï¼ˆå¦‚G1ã€Shenandoahä½¿ç”¨äº†ä¸€ç§ç›¸å½“äºå †å†…å­˜çš„1/64å¤§å°çš„ï¼Œç§°ä¸ºBitMapçš„ç»“æ„æ¥è®°å½•æ ‡è®°ä¿¡æ¯ï¼‰ï¼Œ** **ZGCçš„æŸ“è‰²æŒ‡é’ˆç›´æ¥æŠŠæ ‡è®°ä¿¡æ¯è®°åœ¨å¼•ç”¨å¯¹è±¡çš„æŒ‡é’ˆä¸Šï¼ˆè¿™ä¸ªæ—¶å€™ï¼Œä¸å…¶è¯´å¯è¾¾æ€§åˆ†ææ˜¯éå†å¯¹è±¡å›¾æ¥æ ‡è®°å¯¹è±¡ï¼Œè¿˜ä¸å¦‚è¯´æ˜¯éå†â€œå¼•ç”¨å›¾â€æ¥æ ‡è®°â€œå¼•ç”¨â€äº†ï¼‰ï¼Œ** **é€šè¿‡è¿™å››ä¸ªæ ‡å¿—ä½ï¼ŒJVM å¯ä»¥ä»æŒ‡é’ˆä¸Šç›´æ¥çœ‹åˆ°å¯¹è±¡çš„ä¸‰è‰²æ ‡è®°çŠ¶æ€ï¼ˆMarked0ã€Marked1ï¼‰ã€æ˜¯å¦è¿›å…¥äº†é‡åˆ†é…é›†ï¼ˆRemappedï¼‰ã€æ˜¯å¦éœ€è¦é€šè¿‡ finalize æ–¹æ³•æ¥è®¿é—®åˆ°ï¼ˆFinalizableï¼‰ç­‰ä¿¡æ¯ã€‚** **æ— éœ€è¿›è¡Œå¯¹è±¡è®¿é—®å°±å¯ä»¥è·å¾— GC ä¿¡æ¯ï¼Œè¿™å¤§å¤§æé«˜äº† GC æ•ˆç‡ã€‚** ğŸš€ğŸš€ğŸš€
> 
> - **Remappdï¼šå¯¹è±¡è¢«é‡æ–°æ˜ å°„åˆ°æ–°å†…å­˜ä½ç½®ï¼ˆç§»åŠ¨è¿‡ï¼‰ã€‚**
> - **M1ï¼šä¸Šæ¬¡GCæ ‡è¯†è¿‡ã€‚**
> - **M0ï¼šæœ¬æ¬¡GCæ ‡è¯†è¿‡ã€‚**
> 
> ![](https://i-blog.csdnimg.cn/direct/b11a9265aaef4a23b947cbdcbcf613cd.png)
> 
> **æ³¨æ„ï¼š** **X86\_64 å¤„ç†å™¨ç¡¬ä»¶çš„é™åˆ¶ï¼Œç›®å‰ X86\_64 å¤„ç†å™¨åœ°å€çº¿åªæœ‰ 48 æ¡ï¼ˆCPUè®¾è®¡æ—¶ä½ä¸ºäº†é™ä½æˆæœ¬ï¼Œä»…æ”¯æŒ48ä½åœ°å€ï¼‰ï¼Œé™¤å» 4 ä½æŸ“è‰²æŒ‡é’ˆï¼Œå‰©ä½™å¯ç”¨å¯¹è±¡åœ°å€ 44 ä½ï¼Œç†è®ºä¸Šæ”¯æŒ 16TB çš„å†…å­˜ã€‚**
> 
> **ã€é—®é¢˜ã€‘é‚£ä¸ºå•¥æ€»è¯´ZGCæœ€å¤§æ”¯æŒå†…å­˜æ˜¯4TBï¼Ÿ**
> 
> **ã€ç­”æ¡ˆã€‘** **ç›®å‰æ”¯æŒçš„ 4TB åªæ˜¯äººä¸ºçš„é™åˆ¶ï¼Œä¸»è¦æ˜¯ä¸ºäº†å¹³è¡¡æ€§èƒ½ã€ç¨³å®šæ€§å’Œå®é™…éœ€æ±‚ï¼ˆå‹æ ¹æ²¡æœ‰4TBçš„æœºå™¨ï¼‰ã€‚** ç”±äº 42 ä½ï¼ˆ0-41ï¼‰åœ°å€æœ€å¤§çš„å¯»å€ç©ºé—´å°±æ˜¯ 4TBï¼Œè¿™å°±æ˜¯ ZGC ä¸€ç›´å®£ç§°è‡ªå·±æœ€å¤§æ”¯æŒ 4TB å†…å­˜çš„åŸå› ã€‚
> 
> ```cobol
> 6                 4 4 4  4 4                                             0
> 
>  3                 7 6 5  2 1                                             0
> 
> +-------------------+-+----+-----------------------------------------------+
> 
> |00000000 00000000 0|0|1111|11 11111111 11111111 11111111 11111111 11111111|
> 
> +-------------------+-+----+-----------------------------------------------+
> 
> |                   | |    |
> 
> |                   | |    * 41-0 Object Offset (42-bits, 4TB address space)
> 
> |                   | |
> 
> |                   | * 45-42 Metadata Bits (4-bits)  0001 = Marked0
> 
> |                   |                                 0010 = Marked1
> 
> |                   |                                 0100 = Remapped
> 
> |                   |                                 1000 = Finalizable
> 
> |                   |
> 
> |                   * 46-46 Unused (1-bit, always zero)
> 
> |
> 
> * 63-47 Fixed (17-bits, always zero)
> ```

#### 1.3ï¼ŒZGCå†…å­˜ç®¡ç†

> ã€ç‰©ç†å†…å­˜ã€‘ç‰©ç†å†…å­˜éå¸¸ç›´è§‚ï¼Œå°±æ˜¯çœŸå®å­˜åœ¨çš„ï¼Œå…¶å¤§å°å°±æ˜¯æ’åœ¨ä¸»æ¿å†…å­˜æ§½ä¸Šçš„å†…å­˜æ¡çš„å®¹é‡å¤§å°ã€‚
> 
> ã€è™šæ‹Ÿå†…å­˜ã€‘è™šæ‹Ÿåœ°å€æ˜¯æ“ä½œç³»ç»Ÿæ ¹æ® CPU çš„å¯»å€èƒ½åŠ›ï¼Œæ”¯æŒè®¿é—®çš„è™šæ‹Ÿç©ºé—´ï¼Œæ¯”å¦‚å‰äº›å¹´å¤§å®¶ä½¿ç”¨çš„ 32 ä½æ“ä½œç³»ç»Ÿï¼Œå¯¹åº”çš„è™šæ‹Ÿåœ°å€ç©ºé—´ä¸º 0~232 ï¼Œå³ 0~4GBï¼Œè€Œæˆ‘ä»¬è®¡ç®—æœºçš„ç‰©ç†å†…å­˜å¯èƒ½åªæœ‰ 512MBï¼Œæ‰€ä»¥æ¶‰åŠç‰©ç†å†…å­˜å’Œè™šæ‹Ÿå†…å­˜çš„æ˜ å°„ã€‚
> 
> **ã€æ“ä½œç³»ç»Ÿå†…å­˜æ˜ å°„æœºåˆ¶ã€‘ è™šæ‹Ÿå†…å­˜å’Œç‰©ç†å†…å­˜å¤§å°å¹¶ä¸åŒ¹é…ï¼Œæ‰€ä»¥éœ€è¦ä¸€ä¸ªé¢å¤–çš„æœºåˆ¶æŠŠä¸¤è€…å…³è”èµ·æ¥ã€‚å½“ç¨‹åºè¯•å›¾è®¿é—®ä¸€ä¸ªè™šæ‹Ÿå†…å­˜é¡µé¢æ—¶ï¼Œè¿™ä¸ªè¯·æ±‚ä¼šé€šè¿‡æ“ä½œç³»ç»Ÿæ¥è®¿é—®çœŸæ­£çš„å†…å­˜ã€‚**
> 
> - é¦–å…ˆåˆ°é¡µé¢è¡¨ä¸­æŸ¥è¯¢è¯¥é¡µæ˜¯å¦å·²æ˜ å°„åˆ°ç‰©ç†é¡µæ¡†ä¸­ï¼Œå¹¶è®°å½•åœ¨é¡µè¡¨ä¸­ã€‚
> 	- å¦‚æœå·²è®°å½•ï¼Œåˆ™ä¼šé€šè¿‡å†…å­˜ç®¡ç†å•å…ƒï¼ˆMemory Management Unitï¼ŒMMUï¼‰æŠŠé¡µç è½¬æ¢æˆé¡µæ¡†ç ï¼ˆframeï¼‰ï¼Œå¹¶åŠ ä¸Šè™šæ‹Ÿåœ°å€æä¾›çš„é¡µå†…åç§»é‡å½¢æˆç‰©ç†åœ°å€åå»è®¿é—®ç‰©ç†å†…å­˜ï¼›
> 	- å¦‚æœæœªè®°å½•ï¼Œåˆ™æ„å‘³ç€è¯¥è™šæ‹Ÿå†…å­˜é¡µé¢è¿˜æ²¡æœ‰è¢«è½½å…¥å†…å­˜ï¼Œè¿™æ—¶ MMU å°±ä¼šé€šçŸ¥æ“ä½œç³»ç»Ÿå‘ç”Ÿäº†ä¸€ä¸ªé¡µé¢è®¿é—®é”™è¯¯ï¼ˆä¹Ÿç§°ä¸ºç¼ºé¡µæ•…éšœï¼ˆpage faultï¼‰ï¼‰ï¼Œæ¥ä¸‹æ¥ç³»ç»Ÿä¼šå¯åŠ¨æ‰€è°“çš„ â€œè¯·é¡µâ€ æœºåˆ¶ï¼Œå³è°ƒç”¨ç›¸åº”çš„ç³»ç»Ÿæ“ä½œå‡½æ•°ï¼Œåˆ¤æ–­è¯¥è™šæ‹Ÿåœ°å€æ˜¯å¦ä¸ºæœ‰æ•ˆåœ°å€ã€‚
> 		- å¦‚æœæ˜¯æœ‰æ•ˆçš„åœ°å€ï¼Œå°±ä»è™šæ‹Ÿå†…å­˜ä¸­å°†è¯¥åœ°å€æŒ‡å‘çš„é¡µé¢è¯»å…¥å†…å­˜ä¸­çš„ä¸€ä¸ªç©ºé—²é¡µæ¡†ä¸­ï¼Œå¹¶åœ¨é¡µè¡¨ä¸­æ·»åŠ ç›¸å¯¹åº”çš„è¡¨é¡¹ï¼Œæœ€åå¤„ç†å™¨å°†ä»å‘ç”Ÿé¡µé¢é”™è¯¯çš„åœ°æ–¹é‡æ–°å¼€å§‹è¿è¡Œï¼›
> 		- å¦‚æœæ˜¯æ— æ•ˆçš„åœ°å€ï¼Œåˆ™è¡¨æ˜è¿›ç¨‹åœ¨è¯•å›¾è®¿é—®ä¸€ä¸ªä¸å­˜åœ¨çš„è™šæ‹Ÿåœ°å€ï¼Œæ­¤æ—¶æ“ä½œç³»ç»Ÿå°†ç»ˆæ­¢æ­¤æ¬¡è®¿é—®ã€‚
> - åœ¨è¯·é¡µæˆåŠŸä¹‹åï¼Œå†…å­˜ä¸­å·²ç»æ²¡æœ‰ç©ºé—²ç‰©ç†é¡µæ¡†äº†ï¼Œè¿™æ—¶ï¼Œç³»ç»Ÿå¿…é¡»å¯åŠ¨æ‰€è°“çš„ â€œäº¤æ¢â€ æœºåˆ¶ï¼Œå³è°ƒç”¨ç›¸åº”çš„å†…æ ¸æ“ä½œå‡½æ•°ï¼Œåœ¨ç‰©ç†é¡µæ¡†ä¸­å¯»æ‰¾ä¸€ä¸ªå½“å‰ä¸å†ä½¿ç”¨æˆ–è€…è¿‘æœŸå¯èƒ½ä¸ä¼šç”¨åˆ°çš„é¡µé¢æ‰€å æ®çš„é¡µæ¡†ã€‚æ‰¾åˆ°åï¼Œå°±æŠŠå…¶ä¸­çš„é¡µç§»å‡ºï¼Œä»¥è£…è½½æ–°çš„é¡µé¢ã€‚å¯¹ç§»å‡ºé¡µé¢æ ¹æ®ä¸¤ç§æƒ…å†µæ¥å¤„ç†ï¼š
> 	- å¦‚æœè¯¥é¡µæœªè¢«ä¿®æ”¹è¿‡ï¼Œåˆ™åˆ é™¤å®ƒï¼›
> 	- å¦‚æœè¯¥é¡µæ›¾ç»è¢«ä¿®æ”¹è¿‡ï¼Œåˆ™ç³»ç»Ÿå¿…é¡»å°†è¯¥é¡µå†™å›è¾…å­˜ã€‚

> ****ã€é—®é¢˜ã€‘Javaè™šæ‹Ÿæœºä½œä¸ºä¸€ä¸ªæ™®æ™®é€šé€šçš„è¿›ç¨‹ï¼Œè¿™æ ·éšæ„é‡æ–°å®šä¹‰å†…** å­˜ä¸­æŸäº›æŒ‡é’ˆçš„å…¶ä¸­å‡ ä½ï¼Œæ“ä½œç³»ç»Ÿæ˜¯å¦æ”¯æŒï¼Ÿå¤„ç†å™¨æ˜¯å¦æ”¯æŒï¼Ÿ**
> 
> **ã€ç­”æ¡ˆã€‘** **ç¨‹åºä»£ç æœ€ç»ˆéƒ½è¦è½¬æ¢ä¸ºæœºå™¨æŒ‡ä»¤æµäº¤ä»˜ç»™å¤„ç†å™¨å»æ‰§è¡Œï¼Œ** **å¤„ç†å™¨å¯ä¸ä¼šç®¡æŒ‡ä»¤æµä¸­çš„æŒ‡é’ˆå“ªéƒ¨åˆ†å­˜çš„æ˜¯æ ‡å¿—ä½ï¼Œå“ªéƒ¨åˆ†æ‰æ˜¯çœŸæ­£çš„å¯»å€åœ°å€ï¼Œåªä¼šæŠŠæ•´ä¸ªæŒ‡é’ˆéƒ½è§†ä½œä¸€ä¸ªå†…å­˜åœ°å€æ¥å¯¹å¾…ã€‚** åœ¨ **Solaris/SPARCå¹³å°** ä¸Šï¼Œç¡¬ä»¶å±‚é¢ç›´æ¥æ”¯æŒè™šæ‹Ÿåœ°å€æ©ç ï¼Œèƒ½å¤Ÿè½»æ¾å¿½ç•¥æŸ“è‰²æŒ‡é’ˆä¸­çš„æ ‡å¿—ä½ï¼Œä»è€Œç®€åŒ–äº†ZGCçš„è®¾è®¡ã€‚è€Œåœ¨ **x86-64å¹³å°** ä¸Šï¼Œæ²¡æœ‰ç±»ä¼¼çš„ç¡¬ä»¶æ”¯æŒï¼ŒZGCè®¾è®¡è€…å¿…é¡»ä¾èµ–å…¶ä»–çš„æŠ€æœ¯æ‰‹æ®µï¼Œä¸»è¦æ˜¯è™šæ‹Ÿå†…å­˜æ˜ å°„æŠ€æœ¯ï¼Œä»¥å¼¥è¡¥è¿™ä¸€ç¼ºé™·ã€‚
> 
> **ã€ç­”æ¡ˆã€‘** **ZGCä»…æ”¯æŒ64ä½ç³»ç»Ÿï¼Œå®ƒæŠŠ64ä½è™šæ‹Ÿåœ°å€ç©ºé—´åˆ’åˆ†ä¸ºå¤šä¸ªå­ç©ºé—´ã€‚** **å½“åˆ›å»ºå¯¹è±¡æ—¶ï¼Œé¦–å…ˆåœ¨å †ç©ºé—´ç”³è¯·ä¸€ä¸ªè™šæ‹Ÿåœ°å€ï¼Œè¯¥è™šæ‹Ÿåœ°å€å¹¶ä¸ä¼šæ˜ å°„åˆ°çœŸæ­£çš„ç‰©ç†åœ°å€ã€‚** **åŒæ—¶ï¼ŒZGC ä¼šåœ¨ M0ã€M1ã€Remapped ç©ºé—´ä¸­ä¸ºè¯¥å¯¹è±¡åˆ†åˆ«ç”³è¯·ä¸€ä¸ªè™šæ‹Ÿåœ°å€ï¼Œä¸”ä¸‰ä¸ªè™šæ‹Ÿåœ°å€éƒ½æ˜ å°„åˆ°åŒä¸€ä¸ªç‰©ç†åœ°å€ã€‚** **ZGC å°±æ˜¯é€šè¿‡è¿™ä¸‰ä¸ªè§†å›¾ç©ºé—´çš„åˆ‡æ¢ï¼Œæ¥å®Œæˆå¹¶å‘çš„åƒåœ¾å›æ”¶ã€‚**
> 
> ![](https://i-blog.csdnimg.cn/direct/60033bcc721e4737a17624fd30e92966.png)
> 
> å‡å¦‚ä½ è¦å» â€œä¸­å±±ä¸€è·¯3å·â€ è¿™ä¸ªåœ°å€æ‹œè®¿ä¸€ä½æœ‹å‹ï¼Œæ ¹æ®ä½ æ‰€å¤„åŸå¸‚çš„ä¸åŒï¼Œè­¬å¦‚åœ¨å¹¿å·æˆ–è€…åœ¨ä¸Šæµ·ï¼Œæ˜¯èƒ½å¤Ÿé€šè¿‡è¿™ä¸ªâ€œç›¸åŒçš„åœ°å€â€å®šä½åˆ°ä¸¤ä¸ªå®Œå…¨ç‹¬ç«‹çš„ç‰©ç†ä½ç½®çš„ï¼Œè¿™æ—¶åœ°å€ä¸ç‰©ç†ä½ç½®æ˜¯ä¸€å¯¹å¤šå…³ç³»æ˜ å°„ã€‚

#### 1.4ï¼Œè¯»å±éšœ

> **å½“ç¨‹åºå°è¯•è¯»å–ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œè¯»å±éšœä¼šè§¦å‘ä»¥ä¸‹æ“ä½œï¼š**
> 
> - **æ£€æŸ¥æŒ‡é’ˆæŸ“è‰²ï¼š** **è¯»å±éšœé¦–å…ˆæ£€æŸ¥æŒ‡å‘å¯¹è±¡çš„æŒ‡é’ˆçš„é¢œè‰²ä¿¡æ¯ã€‚**
> - **å¤„ç†ç§»åŠ¨çš„å¯¹è±¡ï¼š** **å¦‚æœæŒ‡é’ˆè¡¨ç¤ºå¯¹è±¡å·²ç»è¢«ç§»åŠ¨ï¼ˆä¾‹å¦‚ï¼Œåœ¨åƒåœ¾å›æ”¶è¿‡ç¨‹ä¸­ï¼‰ï¼Œè¯»å±éšœå°†ç¡®ä¿è¿”å›å¯¹è±¡çš„æ–°ä½ç½®ã€‚**
> - **ç¡®ä¿ä¸€è‡´æ€§ï¼š** **é€šè¿‡è¿™ç§æ–¹å¼ï¼ŒZGC èƒ½å¤Ÿåœ¨å¹¶å‘ç§»åŠ¨å¯¹è±¡æ—¶ä¿æŒå†…å­˜è®¿é—®çš„ä¸€è‡´æ€§ï¼Œä»è€Œå‡å°‘å¯¹åº”ç”¨ç¨‹åºåœé¡¿çš„éœ€è¦ã€‚**
> ```cobol
> // ä¼ªä»£ç ç¤ºä¾‹ï¼Œå±•ç¤ºè¯»å±éšœçš„æ¦‚å¿µæ€§å®ç°
> 
> Object* read_barrier(Object* ref) {
> 
>     //å¦‚æœå¯¹è±¡å·²ç»è¢«ç§»åŠ¨ï¼Œè¿”å›æ–°åœ°å€
> 
>     if (is_forwarded(ref)) {
> 
>         return get_forwarded_address(ref); // è·å–å¯¹è±¡çš„æ–°åœ°å€
> 
>     }
> 
>     return ref; // å¯¹è±¡æœªç§»åŠ¨ï¼Œè¿”å›åŸå§‹å¼•ç”¨
> 
> }
> ```
> 
> **è¯»å±éšœå¯èƒ½è¢«GCçº¿ç¨‹å’Œä¸šåŠ¡çº¿ç¨‹è§¦å‘ï¼Œå¹¶ä¸”åªä¼šåœ¨è®¿é—®å †å†…å¯¹è±¡æ—¶è§¦å‘ï¼Œè®¿é—®çš„å¯¹è±¡ä½äºGC Rootsæ—¶ä¸ä¼šè§¦å‘ï¼Œè¿™ä¹Ÿæ˜¯æ‰«æGC Rootsæ—¶éœ€è¦STWçš„åŸå› ã€‚**

#### 1.5ï¼ŒZGCå·¥ä½œæµç¨‹

> ![](https://i-blog.csdnimg.cn/direct/bae006d3ed014eb6a52d39cbdeb777f2.png)
> 
> **ã€åˆå§‹æ€ã€‘** **åœ¨ ZGC ä¸­ï¼Œå†…å­˜è¢«åˆ’åˆ†ä¸ºå›ºå®šå¤§å°çš„é¡µé¢ï¼ˆé€šå¸¸æ˜¯ 2MBï¼‰ï¼Œè¿™äº›é¡µé¢ç”¨äºå­˜å‚¨å¯¹è±¡å’Œç®¡ç†å†…å­˜ã€‚**
> 
> ![](https://i-blog.csdnimg.cn/direct/60ff8561da974239b2b8bd8498ac96d6.png)
> 
> **ã€åˆå§‹æ ‡è®°ã€‘** **ZGC æ ‡è®°æ‰€æœ‰ä» GC Root ç›´æ¥å¯è¾¾çš„å¯¹è±¡ã€‚**
> 
> ![](https://i-blog.csdnimg.cn/direct/b0900d812cec41f1a92345527135e985.png)
> 
> **ã€å¹¶å‘æ ‡è®°&é‡æ–°æ˜ å°„ã€‘**
> 
> - **ã€åˆæ¬¡GCã€‘** **ä»** **GC Root** **å¼€å§‹å¯¹å †ä¸­å¯¹è±¡è¿›è¡Œå¯è¾¾æ€§åˆ†æã€‚**
> - **ã€äºŒæ¬¡GCã€‘** **æŠŠä¸Šæ¬¡GC "å¹¶å‘è¿ç§»" é˜¶æ®µè¿ç§»çš„å¯¹è±¡æŒ‡é’ˆä¿®æ­£æŒ‡å‘åˆ°æ–°åˆ†åŒºã€‚**
> 
> ![](https://i-blog.csdnimg.cn/direct/df251f164c7947fb900685d6daf06058.png)
> 
> **ã€å†æ ‡è®°ã€‘** **æ ‡è®°ä¸Šä¸€æ¬¡æ ‡è®°è¿‡ç¨‹æ–°äº§ç”Ÿçš„å¯¹è±¡ã€‚**
> 
> ![](https://i-blog.csdnimg.cn/direct/3ccc8764331c417eaae79ed0b1f82213.png)
> 
> **ã€å¹¶å‘è½¬ç§»å‡†å¤‡ã€‘** **ä¸ºå¯¹è±¡è½¬ç§»åšä¸€äº›å‰ç½®å‡†å¤‡ï¼Œæ¯”å¦‚å¼•ç”¨å¤„ç†ã€å¼±å¼•ç”¨æ¸…ç†å’Œ** **é‡å®šä½é›†** **é€‰æ‹©ç­‰ã€‚**
> 
> ![](https://i-blog.csdnimg.cn/direct/3b74d91cbc534222bc430c83f113dd71.png)
> 
> **ã€åˆå§‹è½¬ç§»ã€‘** **è¿ç§»æ ¹èŠ‚ç‚¹ç›´æ¥å¼•ç”¨çš„å¯¹è±¡åˆ°æ–°åˆ†åŒºï¼Œè¿™ä¸ªé˜¶æ®µéœ€è¦åœé¡¿æ‰€æœ‰çš„åº”ç”¨çº¿ç¨‹ï¼ˆSTWï¼‰ï¼Œä½†ç”±äºåªè¿ç§»æ ¹èŠ‚ç‚¹ç›´æ¥å¼•ç”¨çš„å¯¹è±¡ï¼Œæ‰€ä»¥åœé¡¿æ—¶é—´å¾ˆçŸ­ã€‚**
> 
> ![](https://i-blog.csdnimg.cn/direct/b226d72f52784f548c924fe7a573f6f1.png)
> 
> **ã€å¹¶å‘è½¬ç§»ã€‘** **å¹¶å‘è¿ç§»â€œå¹¶å‘æ ‡è®°â€é˜¶æ®µæ ‡è®°çš„å¯¹è±¡åˆ°æ–°åˆ†åŒºï¼ˆå¯¹è±¡å¼•ç”¨æŒ‡é’ˆæœªä¿®æ”¹ï¼Œä»æŒ‡å‘æ—§åˆ†åŒºï¼‰ã€‚**
> 
> ![](https://i-blog.csdnimg.cn/direct/27611d1d5f2644b5bbac370dc52e5a58.png)
> 
> **å…¶å®ï¼Œåœ¨æ ‡è®°é˜¶æ®µå­˜åœ¨ä¸¤ä¸ªåœ°å€è§†å›¾M0å’ŒM1ï¼Œä¸Šé¢çš„è¿‡ç¨‹æ˜¾ç¤ºåªç”¨äº†ä¸€ä¸ªåœ°å€è§†å›¾ã€‚** **ä¹‹æ‰€ä»¥è®¾è®¡æˆä¸¤ä¸ªï¼Œæ˜¯ä¸ºäº†åŒºåˆ«å‰ä¸€æ¬¡æ ‡è®°å’Œå½“å‰æ ‡è®°** ã€‚ **ç¬¬äºŒæ¬¡è¿›å…¥å¹¶å‘æ ‡è®°é˜¶æ®µåï¼Œåœ°å€è§†å›¾è°ƒæ•´ä¸ºM1ï¼Œè€ŒéM0ã€‚**
> 
> ![](https://i-blog.csdnimg.cn/direct/a3a6834ee52447cea5cec6232357e902.png)

> **ã€é—®é¢˜ã€‘** **ä¸ºä½•å¹¶å‘è½¬ç§»é˜¶æ®µï¼Œå¯¹è±¡å·²è½¬ç§»è‡³æ–°åˆ†åŒºåï¼Œå´æ²¡æœ‰ä¿®æ”¹çº¿ç¨‹æ ˆä¸Šå®é™…çš„å¼•ç”¨ï¼Œä¾ç„¶æŒ‡å‘æ—§åˆ†åŒºï¼Ÿ**
> 
> **ã€ç­”æ¡ˆã€‘** å› ä¸ºå¦‚æœæ­¤æ—¶å†æ‰«æçº¿ç¨‹æ ˆï¼Œä¿®æ”¹å¼•ç”¨åœ°å€ï¼Œè¦æ‰«æçš„é‡å¤ªå¤§ï¼Œæ•ˆç‡å¤ªä½ã€‚åˆšå¥½ä¸‹ä¸€ä¸ªGCå‘¨æœŸä¹Ÿè¦è¿›è¡Œæ‰«ææ ‡è®°ï¼Œå¯ä»¥ **åˆ©ç”¨æ‰«ææ ‡è®°çš„æ—¶é—´ï¼ŒåŒæ—¶æŠŠå¯¹è±¡å¼•ç”¨ä¿®æ­£æŒ‡å‘åˆ°æ–°åˆ†åŒº** ï¼Œä»¥æ­¤æå‡æ•ˆç‡ï¼Œå‡å°‘åœé¡¿æ—¶é—´ã€‚
> 
> **ã€é—®é¢˜ã€‘** **å¹¶å‘è½¬ç§»é˜¶æ®µå¯¹è±¡å·²è¿ç§»ï¼Œä½†å¼•ç”¨æŒ‡é’ˆä»æŒ‡å‘æ—§åˆ†åŒºï¼Œå¦‚ä½•ä¿è¯æ—§åˆ†åŒºè¢«æ¸…ç†åå¯¹è±¡ä»ç„¶å¯ä»¥è®¿é—®ï¼Ÿ**
> 
> **ã€ç­”æ¡ˆã€‘** ç”±äºæœªä¿®æ”¹å¯¹è±¡å¼•ç”¨æŒ‡é’ˆï¼Œä¸ºé˜²æ­¢æ—§åˆ†åŒºè¢«æ¸…ç†ï¼Œå¯¼è‡´å¯¹è±¡æ‰¾ä¸åˆ°çš„é—®é¢˜ï¼Œæ­¤å¤„å¼•å…¥äº† **è¯»å±éšœå’Œè½¬å‘è¡¨ã€‚**
> 
> - è½¬å‘è¡¨è®°å½•äº†å¯¹è±¡ä» **æ—§ä½ç½®åˆ°æ–°ä½ç½®çš„æ˜ å°„å…³ç³»** ï¼Œå®ç°ç±»ä¼¼ä¸€ä¸ªhashè¡¨ï¼Œkeyæ˜¯æ—§åˆ†åŒºçš„ä½ç½®ï¼Œvalueæ˜¯æ–°åˆ†åŒºçš„ä½ç½®ï¼Œæ­¤æ—¶å½“è®¿é—®æ—§ä½ç½®çš„å¯¹è±¡æ—¶ï¼Œé€šè¿‡è½¬å‘è¡¨å¯ä»¥è·å–æ–°ä½ç½®ã€‚è¿™æ ·å¯ä»¥é¿å…åœ¨æ•´ä¸ªå †ç©ºé—´ä¸­æ›´æ–°å¯¹è±¡å¼•ç”¨çš„å¼€é”€ï¼Œå› ä¸ºåªéœ€è¦æ›´æ–°è½¬å‘è¡¨ä¸­çš„æ¡ç›®å³å¯ã€‚
> - è¯»å±éšœçš„ä½œç”¨æ˜¯åœ¨ **è¯»å–å¯¹è±¡å¼•ç”¨æ—¶ï¼Œæ£€æŸ¥å¯¹è±¡çš„æ ‡è®°çŠ¶æ€å¹¶è·å–è½¬å‘è¡¨ä¸­çš„æ˜ å°„å…³ç³»** ã€‚é€šè¿‡è¯»å±éšœï¼ŒZGCèƒ½å¤Ÿåœ¨è¯»å–å¯¹è±¡å¼•ç”¨æ—¶ï¼Œå°†è®¿é—®é‡å®šå‘åˆ°æ–°ä½ç½®ï¼Œä»¥ç¡®ä¿å¯¹è±¡çš„è®¿é—®ä»ç„¶æœ‰æ•ˆã€‚å¦‚ä¸‹å›¾ï¼šæ¯æ¬¡è¯»å–å¼•ç”¨æ—¶ä¼šè§¦å‘ä¸€æ¬¡è¯»å±éšœã€‚
> 
> ![](https://i-blog.csdnimg.cn/direct/4ba7ee8389504ddc9c8af876b7f5ae0c.png)

#### 1.6ï¼ŒZGCæ€§èƒ½

> **ä¸ä»…åº”ç”¨åœ¨å¹¶å‘è½¬ç§»é˜¶æ®µï¼Œè¿˜åº”ç”¨åœ¨å¹¶å‘æ ‡è®°é˜¶æ®µï¼š** **å°†å¯¹è±¡è®¾ç½®ä¸ºå·²æ ‡è®°ï¼Œä¼ ç»Ÿçš„åƒåœ¾å›æ”¶å™¨éœ€è¦è¿›è¡Œä¸€æ¬¡å†…å­˜è®¿é—®ï¼Œå¹¶å°†å¯¹è±¡å­˜æ´»ä¿¡æ¯æ”¾åœ¨å¯¹è±¡å¤´ä¸­ï¼›** **è€Œåœ¨ZGCä¸­ï¼Œåªéœ€è¦è®¾ç½®æŒ‡é’ˆåœ°å€çš„ç¬¬42-45ä½å³å¯ï¼Œå¹¶ä¸”å› ä¸ºæ˜¯å¯„å­˜å™¨è®¿é—®ï¼Œæ‰€ä»¥é€Ÿåº¦æ¯”è®¿é—®å†…å­˜æ›´å¿«ã€‚**
> 
> ![](https://i-blog.csdnimg.cn/direct/8cb1af9f9fdd4bd0ac7fa8bb44b84956.png)
> 
> **ã€ZGCè§¦å‘æ—¶æœºã€‘**
> 
> - é˜»å¡å†…å­˜åˆ†é…è¯·æ±‚è§¦å‘ï¼šå½“åƒåœ¾æ¥ä¸åŠå›æ”¶ï¼Œåƒåœ¾å°†å †å æ»¡æ—¶ï¼Œä¼šå¯¼è‡´éƒ¨åˆ†çº¿ç¨‹é˜»å¡ã€‚åº”å½“é¿å…å‡ºç°è¿™ç§è§¦å‘æ–¹å¼ã€‚æ—¥å¿—ä¸­å…³é”®å­—æ˜¯â€œAllocation Stallâ€ã€‚
> - åŸºäºåˆ†é…é€Ÿç‡çš„è‡ªé€‚åº”ç®—æ³•ï¼šæœ€ä¸»è¦çš„GCè§¦å‘æ–¹å¼ï¼Œå…¶ç®—æ³•åŸç†å¯ç®€å•æè¿°ä¸ºâ€ZGCæ ¹æ®è¿‘æœŸçš„å¯¹è±¡åˆ†é…é€Ÿç‡ä»¥åŠGCæ—¶é—´ï¼Œè®¡ç®—å‡ºå½“å†…å­˜å ç”¨è¾¾åˆ°ä»€ä¹ˆé˜ˆå€¼æ—¶è§¦å‘ä¸‹ä¸€æ¬¡GCâ€ã€‚é€šè¿‡ZAllocationSpikeToleranceå‚æ•°æ§åˆ¶é˜ˆå€¼å¤§å°ï¼Œè¯¥å‚æ•°é»˜è®¤2ï¼Œæ•°å€¼è¶Šå¤§ï¼Œè¶Šæ—©çš„è§¦å‘GCã€‚é€šè¿‡è°ƒæ•´æ­¤å‚æ•°è§£å†³äº†ä¸€äº›é—®é¢˜ã€‚æ—¥å¿—ä¸­å…³é”®å­—æ˜¯â€œAllocation Rateâ€ã€‚
> - åŸºäºå›ºå®šæ—¶é—´é—´éš”ï¼šé€šè¿‡ZCollectionIntervalæ§åˆ¶ï¼Œé€‚åˆåº”å¯¹çªå¢æµé‡åœºæ™¯ã€‚æµé‡å¹³ç¨³å˜åŒ–æ—¶ï¼Œè‡ªé€‚åº”ç®—æ³•å¯èƒ½åœ¨å †ä½¿ç”¨ç‡è¾¾åˆ°95%ä»¥ä¸Šæ‰è§¦å‘GCã€‚æµé‡çªå¢æ—¶ï¼Œè‡ªé€‚åº”ç®—æ³•è§¦å‘çš„æ—¶æœºå¯èƒ½ä¼šè¿‡æ™šï¼Œå¯¼è‡´éƒ¨åˆ†çº¿ç¨‹é˜»å¡ã€‚é€šè¿‡è°ƒæ•´æ­¤å‚æ•°è§£å†³æµé‡çªå¢åœºæ™¯çš„é—®é¢˜ï¼Œæ¯”å¦‚å®šæ—¶æ´»åŠ¨ã€ç§’æ€ç­‰åœºæ™¯ã€‚æ—¥å¿—ä¸­å…³é”®å­—æ˜¯â€œTimerâ€ã€‚
> - ä¸»åŠ¨è§¦å‘è§„åˆ™ï¼šç±»ä¼¼äºå›ºå®šé—´éš”è§„åˆ™ï¼Œä½†æ—¶é—´é—´éš”ä¸å›ºå®šï¼Œæ˜¯ZGCè‡ªè¡Œç®—å‡ºæ¥çš„æ—¶æœºï¼ŒæœåŠ¡å› ä¸ºå·²ç»åŠ äº†åŸºäºå›ºå®šæ—¶é—´é—´éš”çš„è§¦å‘æœºåˆ¶ï¼Œæ‰€ä»¥é€šè¿‡-ZProactiveå‚æ•°å°†è¯¥åŠŸèƒ½å…³é—­ï¼Œä»¥å…GCé¢‘ç¹ï¼Œå½±å“æœåŠ¡å¯ç”¨æ€§ã€‚ æ—¥å¿—ä¸­å…³é”®å­—æ˜¯â€œProactiveâ€ã€‚
> - é¢„çƒ­è§„åˆ™ï¼šæœåŠ¡åˆšå¯åŠ¨æ—¶å‡ºç°ï¼Œä¸€èˆ¬ä¸éœ€è¦å…³æ³¨ã€‚æ—¥å¿—ä¸­å…³é”®å­—æ˜¯â€œWarmupâ€ã€‚
> - å¤–éƒ¨è§¦å‘ï¼šä»£ç ä¸­æ˜¾å¼è°ƒç”¨System.gc()è§¦å‘ã€‚ æ—¥å¿—ä¸­å…³é”®å­—æ˜¯â€œSystem.gc()â€ã€‚
> - å…ƒæ•°æ®åˆ†é…è§¦å‘ï¼šå…ƒæ•°æ®åŒºä¸è¶³æ—¶å¯¼è‡´ï¼Œä¸€èˆ¬ä¸éœ€è¦å…³æ³¨ã€‚ æ—¥å¿—ä¸­å…³é”®å­—æ˜¯â€œMetadata GC Thresholdâ€ã€‚

### 2ï¼Œåˆ†ä»£ZGC

#### 2.1ï¼ŒJDK21åœ¨ZGCä¸Šçš„å‡çº§

> **ã€æ”¯æŒåˆ†ä»£ã€‘å¢åŠ äº†å¯¹åˆ†ä»£çš„æ”¯æŒï¼Œæé«˜åƒåœ¾å›æ”¶çš„æ€§èƒ½ã€‚**
> 
> - **JDK21ä¹‹å‰ï¼šZGC çš„å †å†…å­˜ä¹Ÿæ˜¯åŸºäº Region æ¥åˆ†å¸ƒï¼Œä¸è¿‡ ZGC æ˜¯ä¸åŒºåˆ†æ–°ç”Ÿä»£è€å¹´ä»£çš„ã€‚**
> - **JDK21ä¹‹åï¼š** **åˆ†ä»£ZGCä¸ºå¹´è½»å’Œå¹´è€çš„å¯¹è±¡ä¿ç•™ä¸åŒçš„ä¸–ä»£ï¼Œè¿™å°†ä½¿ ZGC èƒ½å¤Ÿæ›´é¢‘ç¹åœ°æ”¶é›†å¹´è½»å¯¹è±¡ï¼Œå› ä¸ºå¹´è½»å¯¹è±¡å¾€å¾€åœ¨å¾ˆå¹´è½»æ—¶å°±ä¼šæ­»äº¡ã€‚**
> 
> **ã€åˆ†ä»£çš„å¿…è¦æ€§ã€‘** **åœ¨ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­å¾ˆå¤šå¯¹è±¡ç”Ÿå‘½æœŸè¾ƒçŸ­ï¼Œå¯¹è¿™äº›çŸ­ç”Ÿå‘½æœŸå¯¹è±¡è¿›è¡Œå›æ”¶ï¼Œå¯ä»¥å›æ”¶å¾ˆå¤šå†…å­˜ç©ºé—´ï¼›å‰©ä½™é‚£éƒ¨åˆ†ç”Ÿå‘½æœŸè¾ƒé•¿çš„å¯¹è±¡ï¼Œä¸€èˆ¬ä¹Ÿä¸ä¼šè¢«å›æ”¶æ‰ï¼Œæ‰€ä»¥å¯¹è¿™äº›é•¿ç”Ÿå‘½æœŸå¯¹è±¡è¿›è¡Œå›æ”¶ï¼Œå¯ä»¥å›æ”¶çš„å†…å­˜å°±æ¯”è¾ƒæœ‰é™äº†ã€‚** **ä¸åº”è¯¥å¯¹æ‰€æœ‰å¯¹è±¡éƒ½ä¸€è§†åŒä»ï¼Œå¯¹äºé‚£äº›ç”Ÿå‘½æœŸçŸ­çš„å¯¹è±¡è¦ç»å¸¸å›æ”¶ï¼Œè·å–é«˜æ”¶ç›Šï¼Œå¯¹äºé‚£äº›ç”Ÿå‘½æœŸé•¿çš„å¯¹è±¡å°½é‡ä¸è¦æµªè´¹æ—¶é—´å»å›æ”¶**
> 
> ![](https://i-blog.csdnimg.cn/direct/408928ffd32f4905b3d4791c9b05c1b8.png)
> 
> **ZGC é‡‡ç”¨ä¸€ç§ç§°ä¸ºå½©è‰²æŒ‡é’ˆçš„æŠ€æœ¯ã€‚ä¸ºäº†é¿å…æ©ç æŒ‡é’ˆçš„å¼€é”€ï¼ŒZGC é‡‡ç”¨äº†å¤šé‡æ˜ å°„æŠ€æœ¯ã€‚å¤šé‡æ˜ å°„æ˜¯æŒ‡å°†å¤šæ®µè™šæ‹Ÿå†…å­˜æ˜ å°„åˆ°åŒä¸€æ®µç‰©ç†å†…å­˜ã€‚ ZGCä½¿ç”¨Javaå †çš„3ä¸ªè§†å›¾ï¼ˆâ€œmarked0â€ï¼Œâ€œmarked1â€ï¼Œâ€œremappedâ€ï¼‰ï¼Œå³3ç§ä¸åŒâ€œé¢œè‰²â€çš„å †æŒ‡é’ˆå’ŒåŒä¸€ä¸ªå †çš„3ä¸ªè™šæ‹Ÿå†…å­˜æ˜ å°„ã€‚** **å› æ­¤ï¼Œæ“ä½œç³»ç»Ÿå¯èƒ½ä¼šæŠ¥å‘Š 3 å€å¤§çš„å†…å­˜ä½¿ç”¨é‡ã€‚** **ä¾‹å¦‚ï¼Œå¯¹äº 512 MB çš„å †ï¼ŒæŠ¥å‘Šçš„å·²æäº¤å†…å­˜å¯èƒ½é«˜è¾¾ 1.5 GBï¼Œä¸åŒ…æ‹¬å †ä»¥å¤–çš„å†…å­˜ã€‚æ³¨æ„ï¼šå¤šé‡æ˜ å°„ä¼šå½±å“æŠ¥å‘Šçš„ä½¿ç”¨å†…å­˜ï¼Œä½†ç‰©ç†ä¸Šå †ä»å°†ä½¿ç”¨ 512 MB çš„ RAMã€‚è¿™æœ‰æ—¶ä¼šå¯¼è‡´ä¸€ä¸ªæœ‰è¶£çš„æ•ˆæœï¼Œå³è¿›ç¨‹çš„ RSS çœ‹èµ·æ¥å¤§äºç‰©ç† RAM çš„æ•°é‡ã€‚**
> 
> ![](https://i-blog.csdnimg.cn/direct/244886b7251544d8a9181f63cfb68ad0.png)

#### 2.2ï¼Œå¦‚ä½•è§£å†³ZGCçš„RSSæŒ‡æ ‡ç¿»3å€çš„é—®é¢˜ï¼Ÿ

> **ã€ZGCæŸ“è‰²æŒ‡é’ˆã€‘** å¦‚æœè¯»è€…äº†è§£è¿‡æ™®é€šZGCï¼Œå°±ä¸€å®šäº†è§£å®ƒçš„é¢œè‰²æŒ‡é’ˆï¼Œé€šè¿‡è™šæ‹Ÿå†…å­˜é«˜ä½çš„4ä¸ªbitä½æ ‡å¿—å½“å‰çš„å¼•ç”¨åƒåœ¾å›æ”¶çŠ¶æ€ã€‚è¿™4ä¸ªbitä½ä¸­ï¼Œæœ‰ä¸€ä½æ²¡æœ‰ä½¿ç”¨ï¼Œè€Œå…¶å®ƒ3ä½åŒä¸€æ—¶é—´å†…åªæœ‰1ä½ä¸º1ï¼Œä½†æ˜¯ä¸ç®¡å“ªä½ä¸º1ï¼Œ **éƒ½è¦æŒ‡å‘ç›¸åŒçš„ç‰©ç†åœ°å€ï¼Œä¹Ÿå°±æ˜ å°„3æ¬¡ï¼Œæœ€ç»ˆé€ æˆæ™®é€šZGCçš„RSSæŒ‡æ ‡ï¼ˆRSSç»Ÿè®¡çš„è™šæ‹Ÿå†…å­˜åœ°å€ï¼‰ç¿»äº†3å€ã€‚**
> 
> ![](https://i-blog.csdnimg.cn/direct/57821f2028d64f51a58bc152d885887d.png)
> 
> **ã€åˆ†ä»£ZGCæŸ“è‰²æŒ‡é’ˆã€‘** åˆ†ä»£ZGCéœ€è¦æ›´å¤šçš„æ ‡è®°ä½ï¼Œå¦‚æœè¿˜ä½¿ç”¨muli-mapçš„æ–¹å¼ï¼Œ **ç¬¬ä¸€å¯ç”¨å†…å­˜ä¼šå› ä¸ºå¤šåŠ æ ‡è®°ä½å‡å°‘ï¼›ç¬¬äºŒRSSæŒ‡æ ‡å¯èƒ½æ˜¯å®é™…ä½¿ç”¨å†…å­˜çš„4\*4\*4ï¼ˆæ¯ä»£4ä¸ªæŒ‡é’ˆï¼‰å€ï¼Ÿ** **æ‰€ä»¥åˆ†ä»£ZGCåœ¨æŠŠè™šæ‹Ÿå†…å­˜äº¤ç»™æ“ä½œç³»ç»Ÿçš„æ—¶å€™ï¼Œéœ€è¦æ¸…é™¤æ ‡è®°ä½ã€‚** **è¿™ä¹Ÿæ˜¯ä¸ºå•¥ZGCä¸€å¼€å§‹ä¸æ”¯æŒåˆ†ä»£çš„åŸå› ã€‚**
> 
> - **ä¿å­˜åœ¨å†…å­˜ä¸­çš„Javaå¯¹è±¡å¼•ç”¨åœ°å€æ˜¯æœ‰é¢œè‰²çš„ã€‚**
> - **è¯»å–å‡ºæ¥å¤„ç†çš„æ—¶å€™ï¼Œé€šè¿‡ Load Barrier å°†é¢œè‰²å»æ‰ï¼Œä¹‹åå†å»å¯»å€ã€‚**
> - **å­˜å‚¨çš„æ—¶å€™ï¼Œé€šè¿‡ Store Barrier å°†é¢œè‰²æ¢å¤ã€‚**
> 
> **PSï¼šLoad Barrier å’Œ Store Barrier æ˜¯ ZGC æ¶ˆè€— CPU å¤§çš„ä¸€ä¸ªé‡è¦åŸå› ã€‚**
> 
> ![](https://i-blog.csdnimg.cn/direct/54271e255bcb4b1eb8db158c086f7058.png)
> 
> å¯¹è±¡çš„æœ‰æ•ˆåœ°å€ä¸º46ä½ï¼Œ **ç›¸å¯¹äº64ä½æ“ä½œç³»ç»Ÿå¯¹ç”¨æˆ·ç©ºé—´47ä½çš„é™åˆ¶ï¼Œ** åªå°‘äº†1ä½ï¼Œæ¯”èµ·æ™®é€šZGCå¤šäº†2ä½ï¼ˆ64TBï¼‰ã€‚ **åŒæ—¶é¢œè‰²æŒ‡é’ˆæ”¾åœ¨äº†ä½ä½ï¼Œæœ‰12ä½ä¹‹å¤šã€‚**
> 
> - **load colorï¼ˆRï¼‰ï¼š** **æŸ“è‰²æŒ‡é’ˆï¼Œè·Ÿè¯»å±éšœæœ‰å…³ã€‚**
> - **MMmmFFffï¼š** **ä¸å†™å±éšœæœ‰å…³ã€‚**
> 
> **ã€æ“ä½œç³»ç»Ÿåœ°å€-æ— è‰²æŒ‡é’ˆåœ°å€ã€‘** **å½“JVMæŠŠåˆ†ä»£ZGCä¸­çš„è™šæ‹Ÿåœ°å€äº¤ç»™æ“ä½œç³»ç»Ÿä½¿ç”¨æ—¶ï¼Œä¼šå»æ‰12ä½æŸ“è‰²æŒ‡é’ˆï¼Œè½¬æ¢ä¸ºå¦‚ä¸‹çš„å½¢å¼ã€‚** **æ‰€ä»¥æ“ä½œç³»ç»Ÿçœ‹åˆ°çš„å°±æ˜¯æ ‡å‡†çš„è™šæ‹Ÿåœ°å€ï¼ˆRSSä¸ä¼šç¿»å€ï¼‰ï¼Œ** **è¿™ä¸ªè¿‡ç¨‹é€šè¿‡è¯»å±éšœæ¥å®ç°ã€‚**
> 
> ![](https://i-blog.csdnimg.cn/direct/dfb71a1d4e5945d3b743584bc2275ee8.png)

#### 2.3ï¼Œå¦‚ä½•åœ¨ä¸äº§ç”Ÿé¢å¤–æˆæœ¬çš„æƒ…å†µä¸‹å»é™¤å’Œæ¢å¤é¢œè‰²ï¼Ÿ

> **ã€ZGCè¯»å±éšœã€‘æ£€æŸ¥æŒ‡é’ˆé¢œè‰²æ˜¯å¦æ˜¯å¥½çš„ï¼›** æ™®é€šZGCåœ¨è¯»å±éšœä¸­å…ˆåŠ è½½åœ°å€ï¼ˆ **rbx** å¯„å­˜å™¨ä¸­çš„åœ°å€è½¬æ¢ä¸ºè™šæ‹Ÿåœ°å€ï¼‰åˆ° **rax** å¯„å­˜å™¨ï¼Œç„¶åé€šè¿‡é¢œè‰²æŒ‡é’ˆéªŒè¯åœ°å€æ˜¯å¦æœ‰æ•ˆï¼ˆ **testq** ï¼‰ï¼Œå¦‚æœä¸æ˜¯æœ‰æ•ˆåœ°å€åˆ™è¿›å…¥slow\_pathä¸­ **ï¼ˆremapæ“ä½œå®Œæˆå¯¹è±¡æŒ‡é’ˆä¿®å¤ï¼Œè½¬å˜ä¸ºæœ‰æ•ˆåœ°å€ï¼Œè½¬å‘è¡¨ï¼‰** ã€‚ç”±äºæŒ‡é’ˆä¿¡æ¯ç›´æ¥ç»™åˆ°äº†æ“ä½œç³»ç»Ÿï¼Œæ‰€ä»¥æ™®é€šZGCéœ€è¦å°†ä¸‰ä¸ªè™šæ‹Ÿåœ°å€æ˜ å°„åˆ°åŒä¸€ä¸ªç‰©ç†åœ°å€ä¸Šã€‚
> 
> ![](https://i-blog.csdnimg.cn/direct/6c96b6126ea4481c81e60faba4a94daf.png)
> 
> **ã€åˆ†ä»£ZGCè¯»å±éšœã€‘** **åˆ†ä»£ZGCå…ˆåŠ è½½åœ°å€åˆ°raxå¯„å­˜å™¨ä¸­ï¼Œç„¶åå³ç§»address\_shiftä½ï¼ˆå³ç§»ä½æ•°ä¸GCé˜¶æ®µæœ‰å…³ï¼‰ï¼Œç„¶ååˆ¤æ–­CFå’ŒZFæ˜¯å¦éƒ½ä¸º0ï¼ˆjaæŒ‡ä»¤çš„ä½œç”¨ï¼‰ï¼Œå¦‚æœè¯¥æ¡ä»¶æˆç«‹ï¼Œåˆ™è¿›å…¥slow\_pathå®Œæˆå¯¹è±¡æŒ‡é’ˆä¿®å¤ï¼ˆå¹¶å‘æ ‡è®°é˜¶æ®µçš„æŒ‡é’ˆä¿®å¤ï¼‰ã€‚**
> 
> ![](https://i-blog.csdnimg.cn/direct/764950d66d064226b5683f7cfe3e251f.png)
> 
> **ã€address\_shiftæ“ä½œã€‘** å³ç§»æœ€å³ç§»é™¤çš„ä½ä½ä¸º1æ—¶CFä¸º1ï¼Œå¦åˆ™CFä¸º0ã€‚å³ç§»æ“ä½œå¾—åˆ°çš„ç»“æœä¸ºå…¨0ï¼Œé‚£ä¹ˆZFä¸º1ï¼Œå¦åˆ™ZFä¸º0ã€‚ç”±äºåœ°å€å³ç§»æ—¶ä¸ä¼šå¾—åˆ°å…¨0ç»“æœï¼Œæ‰€ä»¥è¿™é‡ŒZFå¯ä»¥è®¤ä¸ºæ˜¯ä¸€ä¸ª0å¸¸é‡ã€‚å…³é”®è¦çœ‹CFï¼Œè€ŒCFçš„ç»“æœç”±address\_shiftæ‰€å†³å®šã€‚
> 
> ![](https://i-blog.csdnimg.cn/direct/9151c9b5cbb3482fa1870b80c0157388.png)
> 
> ä¸€å…±4ä¸­æƒ…å†µï¼Œåˆ†åˆ«å¯¹åº”äºä¸åŒçš„GCé˜¶æ®µçš„æœ‰æ•ˆåœ°å€ï¼Œæœ‰æ•ˆåœ°å€çš„4ä¸ªRä½ä¸­æ ¹æ®å½“å‰æ‰€å¤„é˜¶æ®µï¼Œåªæœ‰1ä½ä¸º1ã€‚ **åœ¨æ¯ç§æƒ…å†µä¸­address\_shiftçš„å€¼æ°å¥½å¯ä»¥æŠŠå¢¨ç»¿è‰²çš„å”¯ä¸€çš„1ç§»é™¤æ‰ï¼ˆç»¿è‰²å³ä¾§çš„ç§»é™¤ï¼‰ã€‚** ç”±äºJVMä¸­åœ°å€æ˜¯æŒ‰8å¯¹é½çš„ï¼Œå¯¹äºä¸€ä¸ªæœ‰æ•ˆçš„åœ°å€æ¥è¯´æœ€å°ä¸º8ï¼Œæ‰€ä»¥ä½3ä½ä¸€å®šä¸º0ï¼ˆ00001000=8ï¼‰ï¼Œæœ¬ç€èƒ½çœå°±çœçš„å®—æ—¨ï¼Œä½3ä½çš„0å’Œè¯»æ ‡è®°åŒºè¿›è¡Œäº†é‡å ã€‚

> ![](https://i-blog.csdnimg.cn/direct/d18267ab9be64eb9bd550abcebbfe941.png)
> 
> **ç”±äºåœ¨è¯»åœ°å€çš„æ—¶å€™æŠŠæŒ‡é’ˆä¿¡æ¯åˆ é™¤äº†ï¼Œæ‰€ä»¥åœ¨å†™çš„æ—¶å€™ï¼Œå°±è¦æŠŠä¿¡æ¯æ¢å¤ï¼Œåˆ†ä»£ZGCä¸å¾—ä¸åœ¨å†™å±éšœå®Œæˆè¿™ä¸ªæ“ä½œã€‚åœ¨å†™å…¥çš„æ—¶å€™ï¼Œ12ä¸ªæŸ“è‰²æŒ‡é’ˆéƒ½éœ€è¦å‚ä¸ã€‚**
> 
> ![](https://i-blog.csdnimg.cn/direct/d208d98bfd404bef8a3ccce54bc3eca5.png)
> 
> **ã€ZGCå†™æ“ä½œã€‘** æ™®é€šZGCå†™å…¥çš„æ—¶å€™åªæ˜¯ä¿å­˜äº†åœ°å€ä¿¡æ¯ã€‚
> 
> **ã€åˆ†ä»£ZGCå†™æ“ä½œã€‘** åˆ†ä»£ZGCåœ¨å†™å…¥æ—¶åˆ™å¤šåšäº†4ä¸ªæ“ä½œã€‚å‰ä¸¤ä¸ªæ“ä½œåˆèµ·æ¥å°±æ˜¯æ£€æµ‹åœ°å€æ˜¯å¦éœ€è¦å¤„ç†ï¼Œå¦‚æœéœ€è¦å¤„ç†è¿›å…¥slow\_pathä¸­å¤„ç†ï¼Œè¿™é‡Œslow\_pathä¸»è¦åšäº†å¦‚ä¸‹æ“ä½œï¼š
> 
> - å¹¶è¡Œå¹´è½»ä»£SATB æŸ“è‰²ï¼›
> - å¹¶è¡Œè€å¹´ä»£SATB æŸ“è‰²ï¼›
> - å¹¶è¡ŒRemember Set æŸ“è‰²ã€‚
> 
> **åä¸¤æ¡æŒ‡ä»¤è¿™æ˜¯æŠŠåœ°å€å·¦ç§»ï¼Œç„¶åæŠŠé¢œè‰²æŒ‡é’ˆè¿˜åŸã€‚** ç”±æ­¤å¯è§ï¼Œåœ¨å†™å…¥ä¸Šå¿…ç„¶ä¼šæœ‰æ€§èƒ½æŸè€—ã€‚

  

æ‰“èµä½œè€…

Â¥1 Â¥2 Â¥4 Â¥6 Â¥10 Â¥20

æ‰«ç æ”¯ä»˜ï¼š Â¥1

è·å–ä¸­

æ‰«ç æ”¯ä»˜

æ‚¨çš„ä½™é¢ä¸è¶³ï¼Œè¯·æ›´æ¢æ‰«ç æ”¯ä»˜æˆ– [å……å€¼](https://i.csdn.net/#/wallet/balance/recharge?utm_source=RewardVip)

æ‰“èµä½œè€…

å®ä»˜ å…ƒ

[ä½¿ç”¨ä½™é¢æ”¯ä»˜](https://blog.csdn.net/qq_42192693/article/details/)

ç‚¹å‡»é‡æ–°è·å–

æ‰«ç æ”¯ä»˜

é’±åŒ…ä½™é¢ 0

æŠµæ‰£è¯´æ˜ï¼š

1.ä½™é¢æ˜¯é’±åŒ…å……å€¼çš„è™šæ‹Ÿè´§å¸ï¼ŒæŒ‰ç…§1:1çš„æ¯”ä¾‹è¿›è¡Œæ”¯ä»˜é‡‘é¢çš„æŠµæ‰£ã€‚  
2.ä½™é¢æ— æ³•ç›´æ¥è´­ä¹°ä¸‹è½½ï¼Œå¯ä»¥è´­ä¹°VIPã€ä»˜è´¹ä¸“æ åŠè¯¾ç¨‹ã€‚

[ä½™é¢å……å€¼](https://i.csdn.net/#/wallet/balance/recharge)

ä¸¾æŠ¥

 [![](https://csdnimg.cn/release/blogv2/dist/pc/img/toolbar/Group.png) ç‚¹å‡»ä½“éªŒ  
DeepSeekR1æ»¡è¡€ç‰ˆ](https://ai.csdn.net/?utm_source=cknow_pc_blogdetail&spm=1001.2101.3001.10583) éšè—ä¾§æ  ![ç¨‹åºå‘˜éƒ½åœ¨ç”¨çš„ä¸­æ–‡ITæŠ€æœ¯äº¤æµç¤¾åŒº](https://g.csdnimg.cn/side-toolbar/3.6/images/qr_app.png)

ç¨‹åºå‘˜éƒ½åœ¨ç”¨çš„ä¸­æ–‡ITæŠ€æœ¯äº¤æµç¤¾åŒº

![ä¸“ä¸šçš„ä¸­æ–‡ IT æŠ€æœ¯ç¤¾åŒºï¼Œä¸åƒä¸‡æŠ€æœ¯äººå…±æˆé•¿](https://g.csdnimg.cn/side-toolbar/3.6/images/qr_wechat.png)

ä¸“ä¸šçš„ä¸­æ–‡ IT æŠ€æœ¯ç¤¾åŒºï¼Œä¸åƒä¸‡æŠ€æœ¯äººå…±æˆé•¿

![å…³æ³¨ã€CSDNã€‘è§†é¢‘å·ï¼Œè¡Œä¸šèµ„è®¯ã€æŠ€æœ¯åˆ†äº«ç²¾å½©ä¸æ–­ï¼Œç›´æ’­å¥½ç¤¼é€ä¸åœï¼](https://g.csdnimg.cn/side-toolbar/3.6/images/qr_video.png)

å…³æ³¨ã€CSDNã€‘è§†é¢‘å·ï¼Œè¡Œä¸šèµ„è®¯ã€æŠ€æœ¯åˆ†äº«ç²¾å½©ä¸æ–­ï¼Œç›´æ’­å¥½ç¤¼é€ä¸åœï¼

è¿”å›é¡¶éƒ¨

![](https://i-blog.csdnimg.cn/direct/b11a9265aaef4a23b947cbdcbcf613cd.png) ![](https://i-blog.csdnimg.cn/direct/60033bcc721e4737a17624fd30e92966.png) ![](https://i-blog.csdnimg.cn/direct/bae006d3ed014eb6a52d39cbdeb777f2.png) ![](https://i-blog.csdnimg.cn/direct/60ff8561da974239b2b8bd8498ac96d6.png) ![](https://i-blog.csdnimg.cn/direct/b0900d812cec41f1a92345527135e985.png) ![](https://i-blog.csdnimg.cn/direct/df251f164c7947fb900685d6daf06058.png) ![](https://i-blog.csdnimg.cn/direct/3ccc8764331c417eaae79ed0b1f82213.png) ![](https://i-blog.csdnimg.cn/direct/3b74d91cbc534222bc430c83f113dd71.png) ![](https://i-blog.csdnimg.cn/direct/b226d72f52784f548c924fe7a573f6f1.png) ![](https://i-blog.csdnimg.cn/direct/27611d1d5f2644b5bbac370dc52e5a58.png) ![](https://i-blog.csdnimg.cn/direct/a3a6834ee52447cea5cec6232357e902.png) ![](https://i-blog.csdnimg.cn/direct/4ba7ee8389504ddc9c8af876b7f5ae0c.png) ![](https://i-blog.csdnimg.cn/direct/8cb1af9f9fdd4bd0ac7fa8bb44b84956.png) ![](https://i-blog.csdnimg.cn/direct/408928ffd32f4905b3d4791c9b05c1b8.png) ![](https://i-blog.csdnimg.cn/direct/244886b7251544d8a9181f63cfb68ad0.png) ![](https://i-blog.csdnimg.cn/direct/57821f2028d64f51a58bc152d885887d.png) ![](https://i-blog.csdnimg.cn/direct/54271e255bcb4b1eb8db158c086f7058.png) ![](https://i-blog.csdnimg.cn/direct/dfb71a1d4e5945d3b743584bc2275ee8.png) ![](https://i-blog.csdnimg.cn/direct/6c96b6126ea4481c81e60faba4a94daf.png) ![](https://i-blog.csdnimg.cn/direct/764950d66d064226b5683f7cfe3e251f.png) ![](https://i-blog.csdnimg.cn/direct/9151c9b5cbb3482fa1870b80c0157388.png) ![](https://i-blog.csdnimg.cn/direct/d18267ab9be64eb9bd550abcebbfe941.png) ![](https://i-blog.csdnimg.cn/direct/d208d98bfd404bef8a3ccce54bc3eca5.png)