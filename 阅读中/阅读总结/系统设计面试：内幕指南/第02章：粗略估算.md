---
source: "[[阅读中/文章列表/系统设计面试：内幕指南/第02章：粗略估算|第02章：粗略估算]]"
create: 2025-09-16
---

这篇笔记主要介绍了在系统设计面试中一个重要的技能：**粗略估算**（Back-of-the-envelope estimation）。其核心思想是利用一些基本的性能数据和思维实验，快速估算出系统所需的容量和性能，从而帮助选择合适的设计方案。

## 1. 估算所需的基础知识

文章强调，要做好粗略估算，需要掌握三个基础概念：

*   **2 的幂次方**：这是计算数据量的基础。文章通过表格（表 2-1）清晰地展示了从 Byte 到 Petabyte 的数据单位换算，这对于估算存储需求至关重要。
*   **程序员应知的延迟数据**：引用了谷歌 Jeff Dean 的经典数据，说明了不同计算机操作（如内存读取、磁盘寻道、网络传输）所需的时间。核心结论是：
    *   内存访问远快于磁盘访问。
    *   应尽量避免磁盘寻道。
    *   数据在网络传输前进行压缩是高效的。
    *   跨区域数据传输耗时较长。
*   **可用性数据**：解释了高可用性的概念，通常用百分比（如 99.9%）来衡量。文章通过表格（表 2-3）展示了不同“9”的个数对应的年度停机时间，并提到了服务等级协议（SLA）的概念。

## 2. Twitter QPS 和存储需求的估算实例

文章通过一个估算 Twitter 查询量和存储需求的具体例子，来演示如何应用上述知识。

**估算步骤：**

1.  **明确假设**：首先列出所有基本假设，如月活用户数（3 亿）、日活比例（50%）、发帖频率（每天 2 条）等。
2.  **计算 QPS（每秒查询率）**：
    *   日活跃用户 (DAU) = 3 亿 * 50% = 1.5 亿
    *   推文 QPS = (1.5 亿用户 * 2 条/天) / (24 小时 * 3600 秒) ≈ 3500
    *   峰值 QPS 通常按平均值的 2 倍估算，约为 7000。
3.  **计算存储需求**：
    *   只估算媒体存储，假设平均大小为 1MB。
    *   每日媒体存储 = 1.5 亿用户 * 2 条/天 * 10%含媒体 * 1MB/条 = 30TB
    *   5 年总存储 = 30TB/天 * 365 天 * 5 年 ≈ 55PB

这个例子清晰地展示了如何将抽象的需求，通过一系列合理的假设和计算，转化为具体的性能和容量指标。

## 3. 面试技巧总结

最后，文章提供了一些在面试中进行粗略估算的实用技巧：

*   **过程重于结果**：面试官更关心你的思考过程和解决问题的能力。
*   **四舍五入和近似**：使用简化后的数字（如用 10 万/10 代替 99987/9.1）可以节省时间，不必追求精确计算。
*   **写下假设**：方便自己和面试官回顾与讨论。
*   **标记单位**：明确是 KB 还是 MB，避免混淆。
*   **多加练习**：熟能生巧，特别是对 QPS、存储、缓存、服务器数量等常见问题的估算。

## 总结

这篇笔记是一份非常实用的系统设计面试指南。它不仅解释了“粗略估算”是什么，还提供了进行估算所需的核心数据（数据单位、延迟、可用性），并通过一个完整的实例展示了应用方法，最后给出了应试技巧。对于准备系统设计面试的人来说，这是一份很好的学习材料。